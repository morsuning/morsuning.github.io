<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="发布于 2025年4月18日，原文链接\nClaude Code 是一款用于代理式编码（agentic coding）的命令行工具。本文将介绍一些在使用 Claude Code 过程中，跨越不同代码库、语言和环境都已证明行之有效的技巧和窍门。\n"><title>【翻译】Claude Code：代理式编码的最佳实践</title><link rel=canonical href=https://morsuning.github.io/p/%E7%BF%BB%E8%AF%91claude-code%E4%BB%A3%E7%90%86%E5%BC%8F%E7%BC%96%E7%A0%81%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/><link rel=stylesheet href=/scss/style.min.833d6eed45de56f48306bf57268d5b8cdfc8a60e8e7bdc99810464fcd033f7c6.css><meta property='og:title' content="【翻译】Claude Code：代理式编码的最佳实践"><meta property='og:description' content="发布于 2025年4月18日，原文链接\nClaude Code 是一款用于代理式编码（agentic coding）的命令行工具。本文将介绍一些在使用 Claude Code 过程中，跨越不同代码库、语言和环境都已证明行之有效的技巧和窍门。\n"><meta property='og:url' content='https://morsuning.github.io/p/%E7%BF%BB%E8%AF%91claude-code%E4%BB%A3%E7%90%86%E5%BC%8F%E7%BC%96%E7%A0%81%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/'><meta property='og:site_name' content="morsuning's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Claude'><meta property='article:tag' content='R&amp;D Efficiency'><meta property='article:published_time' content='2025-09-28T00:00:00+00:00'><meta property='article:modified_time' content='2025-09-28T00:00:00+00:00'><meta name=twitter:title content="【翻译】Claude Code：代理式编码的最佳实践"><meta name=twitter:description content="发布于 2025年4月18日，原文链接\nClaude Code 是一款用于代理式编码（agentic coding）的命令行工具。本文将介绍一些在使用 Claude Code 过程中，跨越不同代码库、语言和环境都已证明行之有效的技巧和窍门。\n"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_40bcc3d697d2dcd2.png width=300 height=225 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🌟</span></figure><div class=site-meta><h1 class=site-name><a href=/>morsuning's Blog</a></h1><h2 class=site-description>Developer. Geeker. e/acc. Investing in the future.</h2></div></header><ol class=menu-social><li><a href=https://github.com/morsuning target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/morsuning target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#1-自定义您的设置><strong>1. 自定义您的设置</strong></a><ol><li><a href=#a-创建-claudemd-文件><strong>a. 创建 CLAUDE.md 文件</strong></a></li><li><a href=#b-调优您的-claudemd-文件><strong>b. 调优您的 CLAUDE.md 文件</strong></a></li><li><a href=#c-管理-claude-允许使用的工具列表><strong>c. 管理 Claude 允许使用的工具列表</strong></a></li><li><a href=#d-如果使用-github请安装-gh-cli><strong>d. 如果使用 GitHub，请安装 gh CLI</strong></a></li></ol></li><li><a href=#2-为-claude-提供更多工具><strong>2. 为 Claude 提供更多工具</strong></a><ol><li><a href=#a-将-claude-与-bash-工具结合使用><strong>a. 将 Claude 与 bash 工具结合使用</strong></a></li><li><a href=#b-将-claude-与-mcp-结合使用><strong>b. 将 Claude 与 MCP 结合使用</strong></a></li><li><a href=#c-使用自定义斜杠命令><strong>c. 使用自定义斜杠命令</strong></a></li></ol></li><li><a href=#3-尝试常见工作流><strong>3. 尝试常见工作流</strong></a><ol><li><a href=#a-探索规划编码提交><strong>a. 探索、规划、编码、提交</strong></a></li><li><a href=#b-编写测试提交编码迭代提交><strong>b. 编写测试、提交；编码、迭代、提交</strong></a></li><li><a href=#c-编写代码截图结果迭代><strong>c. 编写代码、截图结果、迭代</strong></a></li><li><a href=#d-安全的-yolo-模式><strong>d. 安全的 YOLO 模式</strong></a></li></ol></li><li><a href=#4-与-claude-协作><strong>4. 与 Claude 协作</strong></a><ol><li><a href=#a-具体明确><strong>a. 具体明确</strong></a></li><li><a href=#b-给-claude-提供图片><strong>b. 给 Claude 提供图片</strong></a></li><li><a href=#c-提及您希望-claude-查看或处理的文件><strong>c. 提及您希望 Claude 查看或处理的文件</strong></a></li><li><a href=#d-给-claude-提供-url><strong>d. 给 Claude 提供 URL</strong></a></li><li><a href=#e-尽早并频繁地进行路线修正><strong>e. 尽早并频繁地进行路线修正</strong></a></li><li><a href=#f-使用-clear-保持上下文的专注><strong>f. 使用 /clear 保持上下文的专注</strong></a></li><li><a href=#g-对复杂工作流使用清单和草稿板><strong>g. 对复杂工作流使用清单和草稿板</strong></a></li></ol></li><li><a href=#5-脚本与自动化><strong>5. 脚本与自动化</strong></a></li><li><a href=#致谢><strong>致谢</strong></a><ol><li><a href=#想了解更多><strong>想了解更多？</strong></a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/programming/>Programming</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E7%BF%BB%E8%AF%91claude-code%E4%BB%A3%E7%90%86%E5%BC%8F%E7%BC%96%E7%A0%81%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/>【翻译】Claude Code：代理式编码的最佳实践</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-09-28T00:00:00Z>Sep 28, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 13 分钟</time></div></footer></div></header><section class=article-content><p><strong>发布于 2025年4月18日，<a class=link href=https://www.anthropic.com/engineering/claude-code-best-practices target=_blank rel=noopener>原文链接</a></strong></p><p>Claude Code 是一款用于代理式编码（agentic coding）的命令行工具。本文将介绍一些在使用 Claude Code 过程中，跨越不同代码库、语言和环境都已证明行之有效的技巧和窍门。</p><p>我们最近<a class=link href=https://www.anthropic.com/news/claude-3-7-sonnet target=_blank rel=noopener>发布了 Claude Code</a>，这是一款为代理式编码设计的命令行工具。作为一项研究项目，Claude Code 为 Anthropic 的工程师和研究人员提供了一种更原生的方式，将 Claude 集成到他们的编码工作流中。</p><p>Claude Code 的设计理念是刻意保持底层和无固定模式（low-level and unopinionated），提供近乎原始的模型访问能力，而不强制用户遵循特定的工作流程。这种设计哲学创造了一个灵活、可定制、可编写脚本且功能强大的安全工具。然而，尽管功能强大，这种灵活性也给初次接触代理式编码工具的工程师带来了一定的学习曲线——至少在他们形成自己的一套最佳实践之前是如此。</p><p>本文旨在概述一些已在 Anthropic 内部团队以及在各种代码库、语言和环境中使用的外部工程师中被证明是行之有效的通用模式。此列表中的任何内容都不是一成不变或普遍适用的；请将这些建议视为起点。我们鼓励您进行实验，找到最适合您的方式！</p><p><em>想要了解更详细的信息吗？我们在 <a class=link href=https://claude.ai/redirect/website.v1.c4a1cf84-94d0-43f2-a02b-73258301b840/code target=_blank rel=noopener>claude.ai/code</a> 上的综合文档涵盖了本文提到的所有功能，并提供了额外的示例、实现细节和高级技术。</em></p><h2 id=1-自定义您的设置><strong>1. 自定义您的设置</strong></h2><p>Claude Code 是一个代理式编码助手，它会自动将上下文信息提取到提示中。这种上下文收集过程会消耗时间和 tokens，但您可以通过调整环境来优化它。</p><h3 id=a-创建-claudemd-文件><strong>a. 创建 CLAUDE.md 文件</strong></h3><p>CLAUDE.md 是一个特殊文件，Claude 在开始对话时会自动将其内容提取到上下文中。这使得它成为记录以下内容的理想场所：</p><ul><li>常用的 bash 命令</li><li>核心文件和实用函数</li><li>代码风格指南</li><li>测试说明</li><li>代码仓库的规范（例如，分支命名、使用 merge 还是 rebase 等）</li><li>开发者环境设置（例如，pyenv 的使用、哪些编译器可用）</li><li>项目中特有的任何意外行为或警告</li><li>您希望 Claude 记住的其他信息</li></ul><p>CLAUDE.md 文件没有固定的格式要求。我们建议保持其内容简洁且易于人类阅读。例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl># Bash commands
</span></span><span class=line><span class=cl>\- npm run build: Build the project
</span></span><span class=line><span class=cl>\- npm run typecheck: Run the typechecker
</span></span><span class=line><span class=cl>\# Code style
</span></span><span class=line><span class=cl>\- Use ES modules (import/export) syntax, not CommonJS (require)
</span></span><span class=line><span class=cl>\- Destructure imports when possible (eg. import { foo } from &#39;bar&#39;)
</span></span><span class=line><span class=cl>\# Workflow
</span></span><span class=line><span class=cl>\- Be sure to typecheck when you’re done making a series of code changes
</span></span><span class=line><span class=cl>\- Prefer running single tests, and not the whole test suite, for performance
</span></span></code></pre></td></tr></table></div></div><p>您可以将 CLAUDE.md 文件放置在多个位置：</p><ul><li><strong>仓库的根目录</strong>，或您运行 claude 命令的任何位置（最常见的用法）。将其命名为 CLAUDE.md 并提交到 git 中，以便在不同会话和团队成员之间共享（推荐），或者命名为 CLAUDE.local.md 并将其添加到 .gitignore 中。</li><li><strong>运行 claude 命令所在目录的任何父目录</strong>。这对于 monorepos（单一代码库）项目最有用，您可能在 root/foo 目录下运行 claude，同时在 root/CLAUDE.md 和 root/foo/CLAUDE.md 中都有 CLAUDE.md 文件。这两个文件的内容都会被自动提取到上下文中。</li><li><strong>运行 claude 命令所在目录的任何子目录</strong>。这与上述情况相反，在这种情况下，当您处理子目录中的文件时，Claude 会按需提取 CLAUDE.md 文件的内容。</li><li><strong>您的主文件夹</strong> (~/.claude/CLAUDE.md)，其内容将应用于您所有的 <em>claude</em> 会话。</li></ul><p>当您运行 /init 命令时，Claude 会自动为您生成一个 CLAUDE.md 文件。</p><h3 id=b-调优您的-claudemd-文件><strong>b. 调优您的 CLAUDE.md 文件</strong></h3><p>您的 CLAUDE.md 文件会成为 Claude 提示的一部分，因此应像对待任何频繁使用的提示一样对其进行优化。一个常见的错误是添加大量内容而没有迭代验证其有效性。花些时间进行实验，确定哪些内容能让模型最好地遵循指令。</p><p>您可以手动向 CLAUDE.md 添加内容，或者按 # 键向 Claude 发出指令，它会自动将该指令整合到相关的 CLAUDE.md 文件中。许多工程师在编码时会频繁使用 # 来记录命令、文件和风格指南，然后将 CLAUDE.md 的更改包含在提交中，以便团队成员也能受益。</p><p>在 Anthropic，我们偶尔会使用<a class=link href=https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-improver target=_blank rel=noopener>提示改进器 (prompt improver)</a> 来优化 CLAUDE.md 文件，并经常调整指令（例如，使用 &ldquo;IMPORTANT&rdquo; 或 &ldquo;YOU MUST&rdquo; 来强调）以提高模型的遵循度。</p><h3 id=c-管理-claude-允许使用的工具列表><strong>c. 管理 Claude 允许使用的工具列表</strong></h3><p>默认情况下，对于任何可能修改您系统的操作，Claude Code 都会请求许可：文件写入、许多 bash 命令、MCP 工具等。我们设计 Claude Code 时采用了这种刻意保守的方法，以将安全性放在首位。您可以自定义允许列表（allowlist），以允许您确信安全的其他工具，或允许那些易于撤销的潜在不安全工具（例如，文件编辑、git commit）。</p><p>有四种方式来管理允许的工具：</p><ul><li>在会话中被提示时<strong>选择 &ldquo;Always allow&rdquo;（始终允许）</strong>。</li><li>启动 Claude Code 后<strong>使用 /permissions 命令</strong>来添加或移除允许列表中的工具。例如，您可以添加 Edit 来始终允许文件编辑，Bash(git commit:*) 来允许 git commit，或者 mcp__puppeteer__puppeteer_navigate 来允许使用 Puppeteer MCP 服务器进行导航。</li><li><strong>手动编辑</strong>您的 .claude/settings.json 或 ~/.claude.json 文件（我们建议将前者检入源代码控制中以便与团队共享）。</li><li><strong>使用 --allowedTools CLI 标志</strong>来设置特定于会话的权限。</li></ul><h3 id=d-如果使用-github请安装-gh-cli><strong>d. 如果使用 GitHub，请安装 gh CLI</strong></h3><p>Claude 知道如何使用 gh CLI 与 GitHub 交互，以创建 issue、开启 pull request、读取评论等。如果没有安装 gh，Claude 仍然可以使用 GitHub API 或 MCP 服务器（如果您已安装）。</p><h2 id=2-为-claude-提供更多工具><strong>2. 为 Claude 提供更多工具</strong></h2><p>Claude 可以访问您的 shell 环境，您可以在其中为它构建一系列便利的脚本和函数，就像为自己构建一样。它还可以通过 MCP 和 REST API 利用更复杂的工具。</p><h3 id=a-将-claude-与-bash-工具结合使用><strong>a. 将 Claude 与 bash 工具结合使用</strong></h3><p>Claude Code 继承了您的 bash 环境，使其可以访问您的所有工具。虽然 Claude 了解像 unix 工具和 gh 这样的常用工具，但如果没有指令，它不会知道您的自定义 bash 工具：</p><ol><li>通过使用示例告诉 Claude 工具的名称。</li><li>告诉 Claude 运行 --help 来查看工具文档。</li><li>在 CLAUDE.md 中记录常用的工具。</li></ol><h3 id=b-将-claude-与-mcp-结合使用><strong>b. 将 Claude 与 MCP 结合使用</strong></h3><p>Claude Code 同时作为 MCP 服务器和客户端。作为客户端，它可以通过三种方式连接到任意数量的 MCP 服务器以访问它们的工具：</p><ul><li><strong>在项目配置中</strong>（在相应目录中运行 Claude Code 时可用）。</li><li><strong>在全局配置中</strong>（在所有项目中都可用）。</li><li><strong>在检入代码库的 .mcp.json 文件中</strong>（对在您的代码库中工作的任何人均可用）。例如，您可以将 Puppeteer 和 Sentry 服务器添加到您的 .mcp.json 文件中，这样在您的仓库中工作的每位工程师都可以开箱即用地使用这些工具。</li></ul><p>在使用 MCP 时，使用 --mcp-debug 标志启动 Claude 也有助于识别配置问题。</p><p><img src=https://www-cdn.anthropic.com/images/4zrzovbb/website/6961243cc6409e41ba93895faded4f4bc1772366-1600x1231.png loading=lazy alt=https://www-cdn.anthropic.com/images/4zrzovbb/website/6961243cc6409e41ba93895faded4f4bc1772366-1600x1231.png></p><h3 id=c-使用自定义斜杠命令><strong>c. 使用自定义斜杠命令</strong></h3><p>对于重复性的工作流——如调试循环、日志分析等——您可以将提示模板存储在 .claude/commands 文件夹中的 Markdown 文件里。当您键入 / 时，这些模板就会通过斜杠命令菜单可用。您可以将这些命令检入 git，使其对团队其他成员可用。</p><p>自定义斜杠命令可以包含特殊关键字 $ARGUMENTS，以从命令调用中传递参数。</p><p>例如，这是一个可用于自动获取并修复 GitHub issue 的斜杠命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>Please analyze and fix the GitHub issue: $ARGUMENTS.
</span></span><span class=line><span class=cl>Follow these steps:
</span></span><span class=line><span class=cl>1\. Use \`gh issue view\` to get the issue details
</span></span><span class=line><span class=cl>2\. Understand the problem described in the issue
</span></span><span class=line><span class=cl>3\. Search the codebase for relevant files
</span></span><span class=line><span class=cl>4\. Implement the necessary changes to fix the issue
</span></span><span class=line><span class=cl>5\. Write and run tests to verify the fix
</span></span><span class=line><span class=cl>6\. Ensure code passes linting and type checking
</span></span><span class=line><span class=cl>7\. Create a descriptive commit message
</span></span><span class=line><span class=cl>8\. Push and create a PR
</span></span><span class=line><span class=cl>Remember to use the GitHub CLI (\`gh\`) for all GitHub-related tasks.
</span></span></code></pre></td></tr></table></div></div><p>将上述内容放入 .claude/commands/fix-github-issue.md 文件中，即可在 Claude Code 中通过 /project:fix-github-issue 命令使用它。然后，您可以使用 /project:fix-github-issue 1234 来让 Claude 修复编号为 1234 的 issue。同样，您可以将个人命令添加到 ~/.claude/commands 文件夹中，以便在所有会话中使用。</p><h2 id=3-尝试常见工作流><strong>3. 尝试常见工作流</strong></h2><p>Claude Code 不会强加特定的工作流，这让您可以灵活地按自己喜欢的方式使用它。在这种灵活性所提供的空间内，我们的用户社区中涌现出了几种成功有效使用 Claude Code 的模式：</p><h3 id=a-探索规划编码提交><strong>a. 探索、规划、编码、提交</strong></h3><p>这个通用的工作流适用于许多问题：</p><ol><li><strong>要求 Claude 阅读相关文件、图片或 URL</strong>，可以提供一般性指引（“阅读处理日志的文件”）或具体文件名（“阅读 logging.py”），但要明确告诉它暂时不要编写任何代码。<ol><li>在这个工作流阶段，您应该考虑充分利用子代理（subagents），特别是对于复杂问题。让 Claude 使用子代理来验证细节或调查它可能有的特定问题，尤其是在对话或任务的早期，这往往能在不显著损失效率的情况下，更好地保留上下文的可用性。</li></ol></li><li><strong>要求 Claude 制定一个解决特定问题的计划</strong>。我们建议使用 &ldquo;think&rdquo; 这个词来触发扩展思考模式，这会给予 Claude 额外的计算时间来更彻底地评估备选方案。这些特定的短语直接映射到系统中不断增加的思考预算级别：&ldquo;think&rdquo; &lt; &ldquo;think hard&rdquo; &lt; &ldquo;think harder&rdquo; &lt; &ldquo;ultrathink&rdquo;。每个级别都会为 Claude 分配更多的思考预算。<ol><li>如果这一步的结果看起来合理，您可以让 Claude 创建一个文档或一个 GitHub issue 来记录它的计划，这样如果实现步骤（第3步）不符合您的期望，您可以回溯到这个节点。</li></ol></li><li><strong>要求 Claude 用代码实现其解决方案</strong>。这也是一个好时机，可以要求它在实现方案的各个部分时，明确验证其解决方案的合理性。</li><li><strong>要求 Claude 提交结果并创建一个 pull request</strong>。如果相关，这也是让 Claude 更新任何 README 或变更日志，解释它刚刚做了什么的好时机。</li></ol><p>步骤 #1-#2 至关重要——没有它们，Claude 往往会直接跳到编码解决方案。虽然有时这正是您想要的，但对于需要更深入前期思考的问题，要求 Claude 先进行研究和规划会显著提高其表现。</p><p><img src=https://www-cdn.anthropic.com/images/4zrzovbb/website/6ea59a36fe82c2b300bceaf3b880a4b4852c552d-1600x1143.png loading=lazy alt=https://www-cdn.anthropic.com/images/4zrzovbb/website/6ea59a36fe82c2b300bceaf3b880a4b4852c552d-1600x1143.png></p><h3 id=b-编写测试提交编码迭代提交><strong>b. 编写测试、提交；编码、迭代、提交</strong></h3><p>这是一个 Anthropic 内部最喜欢的工作流，适用于那些可以通过单元测试、集成测试或端到端测试轻松验证的变更。测试驱动开发（TDD）在代理式编码的加持下变得更加强大：</p><ol><li><strong>要求 Claude 根据预期的输入/输出对编写测试</strong>。明确指出您正在进行测试驱动开发，这样它就会避免创建模拟实现，即使对于代码库中尚不存在的功能也是如此。</li><li><strong>告诉 Claude 运行测试并确认它们失败</strong>。在此阶段明确告诉它不要编写任何实现代码通常很有帮助。</li><li><strong>当您对测试满意时，要求 Claude 提交测试</strong>。</li><li><strong>要求 Claude 编写能够通过测试的代码</strong>，并指示它不要修改测试。告诉 Claude 继续尝试，直到所有测试都通过。通常，Claude 需要几次迭代才能完成编写代码、运行测试、调整代码、再运行测试的循环。<ol><li>在此阶段，要求它使用独立的子代理来验证实现是否对测试过拟合，这会很有帮助。</li></ol></li><li><strong>一旦您对更改满意，要求 Claude 提交代码</strong>。</li></ol><p>当 Claude 有一个明确的目标可以迭代时——比如一个视觉模型、一个测试用例或其他类型的输出——它的表现最好。通过提供像测试这样的预期输出，Claude 可以进行更改、评估结果，并逐步改进直到成功。</p><h3 id=c-编写代码截图结果迭代><strong>c. 编写代码、截图结果、迭代</strong></h3><p>与测试工作流类似，您可以为 Claude 提供视觉目标：</p><ol><li><strong>为 Claude 提供一种截取浏览器屏幕截图的方法</strong>（例如，使用 <a class=link href=https://github.com/modelcontextprotocol/servers/tree/c19925b8f0f2815ad72b08d2368f0007c86eb8e6/src/puppeteer target=_blank rel=noopener>Puppeteer MCP 服务器</a>、(<a class=link href=https://github.com/joshuayoes/ios-simulator-mcp target=_blank rel=noopener>https://github.com/joshuayoes/ios-simulator-mcp</a>)，或者手动复制/粘贴截图给 Claude）。</li><li><strong>通过复制/粘贴或拖放图片，或者提供图片文件路径，给 Claude 一个视觉模型</strong>。</li><li><strong>要求 Claude 用代码实现该设计</strong>，截取结果的屏幕截图，并进行迭代，直到其结果与模型匹配。</li><li><strong>当您满意时，要求 Claude 提交</strong>。</li></ol><p>像人类一样，Claude 的输出通过迭代往往会显著改善。虽然第一个版本可能不错，但经过2-3次迭代后，它通常会看起来好得多。为 Claude 提供查看其输出的工具，以获得最佳结果。</p><p><img src=https://www-cdn.anthropic.com/images/4zrzovbb/website/75e1b57a0b696e7aafeca1ed5fa6ba7c601a5953-1360x1126.png loading=lazy alt=https://www-cdn.anthropic.com/images/4zrzovbb/website/75e1b57a0b696e7aafeca1ed5fa6ba7c601a5953-1360x1126.png></p><h3 id=d-安全的-yolo-模式><strong>d. 安全的 YOLO 模式</strong></h3><p>您可以不监督 Claude，而是使用 claude --dangerously-skip-permissions 来绕过所有权限检查，让 Claude 不间断地工作直到完成。这对于修复 lint 错误或生成样板代码等工作流非常有效。</p><p>让 Claude 运行任意命令是有风险的，可能导致数据丢失、系统损坏或&mldr;</p>\[译者注：原文此处句子不完整\]<h2 id=4-与-claude-协作><strong>4. 与 Claude 协作</strong></h2><p>最重要的实践是将 Claude 视为一个智能的协作者，而不仅仅是一个自动补全工具或搜索引擎。当您提供清晰、具体的指令并保持对话式的方法时，Claude 在处理复杂的多步骤任务时表现出色。</p><h3 id=a-具体明确><strong>a. 具体明确</strong></h3><p>Claude 能够推断意图，但它无法读懂您的心思。具体性能够使其更好地与您的期望对齐。</p><div class=table-wrapper><table><thead><tr><th style=text-align:left>不好的指令</th><th style=text-align:left>好的指令</th></tr></thead><tbody><tr><td style=text-align:left>为 foo.py 写测试</td><td style=text-align:left>为 foo.py 写一个新的测试用例，覆盖用户未登录时的边缘情况。避免使用 mock。</td></tr><tr><td style=text-align:left>为什么 ExecutionFactory 的 API 这么奇怪？</td><td style=text-align:left>查看 ExecutionFactory 的 git 历史，总结一下它的 API 是如何演变至今的。</td></tr><tr><td style=text-align:left>添加一个日历小部件</td><td style=text-align:left>查看主页上现有小部件的实现方式，以理解其模式，特别是代码和接口是如何分离的。HotDogWidget.php 是一个很好的入门示例。然后，遵循该模式实现一个新的日历小部件，允许用户选择月份并通过向前/向后翻页来选择年份。除了代码库中已使用的库之外，不要使用其他库，从头开始构建。</td></tr></tbody></table></div><h3 id=b-给-claude-提供图片><strong>b. 给 Claude 提供图片</strong></h3><p>Claude 可以通过多种方式出色地处理图片和图表：</p><ul><li><strong>粘贴截图</strong>（专业提示：在 macOS 中按 <em>cmd+ctrl+shift+4</em> 可以将截图复制到剪贴板，然后按 <em>ctrl+v</em> 粘贴。请注意，这与您通常在 Mac 上使用的 cmd+v 不同，并且在远程操作时无效。）</li><li><strong>拖放</strong>图片到提示输入框中。</li><li><strong>提供图片的文件路径</strong>。</li></ul><p>这在进行 UI 开发时以设计模型为参考点，以及在分析和调试时使用可视化图表时特别有用。即使您不向上下文中添加视觉材料，明确告诉 Claude 最终结果在视觉上需要具有吸引力的重要性，仍然很有帮助。</p><p><img src=https://www-cdn.anthropic.com/images/4zrzovbb/website/7372868757dd17b6f2d3fef98d499d7991d89800-1450x1164.png loading=lazy alt=https://www-cdn.anthropic.com/images/4zrzovbb/website/7372868757dd17b6f2d3fef98d499d7991d89800-1450x1164.png></p><h3 id=c-提及您希望-claude-查看或处理的文件><strong>c. 提及您希望 Claude 查看或处理的文件</strong></h3><p>使用 Tab 键自动补全功能，可以快速引用您仓库中任何位置的文件或文件夹，帮助 Claude 找到或更新正确的资源。</p><h3 id=d-给-claude-提供-url><strong>d. 给 Claude 提供 URL</strong></h3><p>将特定的 URL 与您的提示一起粘贴，Claude 会获取并阅读其内容。为避免对同一域名（例如 docs.foo.com）重复出现权限提示，请使用 /permissions 将域名添加到您的允许列表中。</p><h3 id=e-尽早并频繁地进行路线修正><strong>e. 尽早并频繁地进行路线修正</strong></h3><p>虽然自动接受模式（按 shift+tab 切换）可以让 Claude 自主工作，但通常情况下，通过作为一名积极的协作者并引导 Claude 的方法，您会得到更好的结果。在开始时向 Claude 彻底解释任务可以获得最佳结果，但您也可以随时对 Claude 进行路线修正。</p><p>这四个工具有助于进行路线修正：</p><ul><li><strong>在编码前要求 Claude 制定一个计划</strong>。明确告诉它在您确认其计划可行之前不要编码。</li><li><strong>在任何阶段（思考、工具调用、文件编辑）按 Escape 键中断</strong> Claude，同时保留上下文，以便您可以重新定向或扩展指令。</li><li><strong>双击 Escape 键可以跳回历史记录</strong>，编辑之前的提示，并探索一个不同的方向。您可以编辑提示并重复，直到得到您想要的结果。</li><li><strong>要求 Claude 撤销更改</strong>，通常与选项 #2 结合使用，以采取不同的方法。</li></ul><p>尽管 Claude Code 偶尔会在第一次尝试时就完美解决问题，但使用这些修正工具通常能更快地产生更好的解决方案。</p><p><img src=https://www-cdn.anthropic.com/images/4zrzovbb/website/e071de707f209bbaa7f16b593cc7ed0739875dae-1306x1088.png loading=lazy alt=https://www-cdn.anthropic.com/images/4zrzovbb/website/e071de707f209bbaa7f16b593cc7ed0739875dae-1306x1088.png></p><h3 id=f-使用-clear-保持上下文的专注><strong>f. 使用 /clear 保持上下文的专注</strong></h3><p>在长时间的会话中，Claude 的上下文窗口可能会被不相关的对话、文件内容和命令填满。这会降低性能，有时还会分散 Claude 的注意力。在任务之间频繁使用 /clear 命令来重置上下文窗口。</p><h3 id=g-对复杂工作流使用清单和草稿板><strong>g. 对复杂工作流使用清单和草稿板</strong></h3><p>对于包含多个步骤或需要详尽解决方案的大型任务——如代码迁移、修复大量 lint 错误或运行复杂的构建脚本——可以通过让 Claude 使用 Markdown 文件（甚至 GitHub issue！）作为清单和工作草稿板来提高性能。</p><h2 id=5-脚本与自动化><strong>5. 脚本与自动化</strong></h2><ol><li><strong>批处理</strong>允许您自动执行重复性任务：<ol><li>创建一个包含您的提示的 shell 脚本。</li><li>调用 claude 并传入您的脚本。例如：claude -p “migrate foo.py from React to Vue. When you are done, you MUST return the string OK if you succeeded, or FAIL if the task failed.” --allowedTools Edit Bash(git commit:*)</li><li>多次运行该脚本并优化您的提示以获得期望的结果。</li></ol></li><li><strong>管道操作 (Pipelining)</strong> 将 Claude 集成到现有的数据/处理管道中：<ol><li>调用 claude -p “&lt;your prompt>” --json | your_command，其中 your_command 是您处理管道的下一步。</li><li>就是这样！JSON 输出（可选）可以帮助提供结构，以便于自动化处理。</li></ol></li></ol><p>对于这两种用例，使用 --verbose 标志进行调试 Claude 调用可能会很有帮助。我们通常建议在生产环境中关闭详细模式以获得更清晰的输出。</p><p>您在使用 Claude Code 方面有什么技巧和最佳实践吗？请标记 @AnthropicAI，让我们看看您正在构建什么！</p><h2 id=致谢><strong>致谢</strong></h2><p>作者：Boris Cherny。这项工作借鉴了广大 Claude Code 用户社区的最佳实践，他们富有创造力的方法和工作流程持续激励着我们。特别感谢 Daisy Hollman、Ashwin Bhat、Cat Wu、Sid Bidasaria、Cal Rueb、Nodir Turakulov、Barry Zhang、Drew Hodun 以及许多其他 Anthropic 工程师，他们宝贵的见解和使用 Claude Code 的实践经验帮助塑造了这些建议。</p><h3 id=想了解更多><strong>想了解更多？</strong></h3><p>通过 Anthropic Academy 的课程，掌握 API 开发、模型上下文协议（Model Context Protocol）和 Claude Code。完成课程后可获得证书。</p><p><a class=link href=https://anthropic.skilljar.com/ target=_blank rel=noopener>探索课程</a></p><p>© 2025 Anthropic PBC</p></section><footer class=article-footer><section class=article-tags><a href=/tags/claude/>Claude</a>
<a href=/tags/rd-efficiency/>R&amp;D Efficiency</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/><div class=article-details><h2 class=article-title>Go错误处理最佳实践</h2></div></a></article><article><a href=/p/%E8%BD%AF%E4%BB%B6%E8%BF%87%E7%A8%8B%E6%94%B9%E8%BF%9B%E7%AE%80%E8%BF%B0%E5%9C%A8cmmi%E4%B8%AD%E5%BC%95%E5%85%A5%E6%95%8F%E6%8D%B7/><div class=article-details><h2 class=article-title>软件过程改进简述——在CMMI中引入敏捷</h2></div></a></article><article><a href=/p/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E7%9A%84%E5%8E%86%E5%8F%B2%E6%BC%94%E5%8F%98%E7%AE%80%E8%BF%B0/><div class=article-details><h2 class=article-title>软件工程的历史演变简述</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//morsuning.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2018 -
2026 morsuning's Blog</section><section class=powerby>Intelligence all rights reserved.<br>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>