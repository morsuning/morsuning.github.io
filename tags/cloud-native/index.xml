<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cloud Native on morsuning's Blog</title><link>https://morsuning.github.io/tags/cloud-native/</link><description>Recent content in Cloud Native on morsuning's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 01 Dec 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://morsuning.github.io/tags/cloud-native/index.xml" rel="self" type="application/rss+xml"/><item><title>Kubernetes 存储实现原理及简单示例</title><link>https://morsuning.github.io/p/kubernetes-%E5%AD%98%E5%82%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%8F%8A%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/</link><pubDate>Fri, 01 Dec 2023 00:00:00 +0000</pubDate><guid>https://morsuning.github.io/p/kubernetes-%E5%AD%98%E5%82%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%8F%8A%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/</guid><description>&lt;h2 id="1-kubernetes存储相关概念及实现原理"&gt;1 Kubernetes存储相关概念及实现原理
&lt;/h2&gt;&lt;h3 id="11-pv--pvc"&gt;1.1 PV &amp;amp; PVC
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;概念&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Kubernetes定义了PV（PersistentVolume）与PVC（PersistentVolumeClaim）这两个概念让用户使用持久化存储，是在用户与存储服务提供者之间添加的一个中间层。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;用户&lt;/em&gt;指Kubernetes应用的开发者，&lt;em&gt;存储服务提供者&lt;/em&gt;一般是Kubernetes集群的运维人员，或者是第三方存储服务提供商的服务人员&lt;/p&gt;
&lt;p&gt;存储服务提供者事先根据PV支持的存储卷插件及适配的存储方案（目标存储系统）细节定义好可以支撑存储卷的底层存储空间&lt;/p&gt;
&lt;p&gt;然后由用户通过PVC声明要使用的存储特性来绑定符合条件的最佳PV定义存储卷，实现存储系统的使用与管理职能的解耦，大大简化了用户使用存储的方式&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;为什么这么设计&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;解决2个问题&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;卷对象的生命周期无法独立于Pod而存在&lt;/li&gt;
&lt;li&gt;用户必须足够熟悉存储的使用和配置才能在Pod上配置和使用卷&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810306328.png"
loading="lazy"
alt="1716810306328"
&gt;&lt;/p&gt;
&lt;p&gt;PV是由集群管理员于&lt;strong&gt;全局级别&lt;/strong&gt;配置的预挂载存储空间，它通过支持的存储卷插件及给定的配置参数关联至某个存储系统上可用数据存储的一段空间，这段存储空间可能是Ceph存储系统上的一个存储映像、一个文件系统（CephFS）或其子目录，也可能是NFS存储系统上的一个导出目录等。&lt;/p&gt;
&lt;p&gt;PV将存储系统之上的存储空间抽象为Kubernetes系统全局级别的API资源，由集群管理员负责管理和维护。 将PV提供的存储空间用于Pod对象的存储卷时，用户需要事先使用PVC在&lt;strong&gt;名称空间级别&lt;/strong&gt;声明所需要的存储空间大小及访问模式并提交给Kubernetes API Server，接下来由PV控制器负责查找与之匹配的PV资源并完成绑定。随后，用户在Pod资源中使用persistentVolumeClaim类型的存储卷插件指明要使用的PVC对象的名称即可使用其绑定到的PV所指向的存储空间，如图所示。&lt;/p&gt;
&lt;p&gt;PV和PVC是一对一的关系：一个PVC仅能绑定一个PV，而一个PV在某一时刻也仅可被一个PVC所绑定。&lt;/p&gt;
&lt;p&gt;为了能够让用户更精细地表达存储需求，PV资源对象的定义支持存储容量、存储类、卷模型和访问模式等属性维度的约束。相应地，PVC资源能够从访问模式、数据源、存储资源容量需求和限制、标签选择器、存储类名称、卷模型和卷名称等多个不同的维度向PV资源发起匹配请求并完成筛选。&lt;/p&gt;
&lt;p&gt;PV与PVC示例 &amp;amp; 用户使用示例&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;span class="lnt"&gt;46
&lt;/span&gt;&lt;span class="lnt"&gt;47
&lt;/span&gt;&lt;span class="lnt"&gt;48
&lt;/span&gt;&lt;span class="lnt"&gt;49
&lt;/span&gt;&lt;span class="lnt"&gt;50
&lt;/span&gt;&lt;span class="lnt"&gt;51
&lt;/span&gt;&lt;span class="lnt"&gt;52
&lt;/span&gt;&lt;span class="lnt"&gt;53
&lt;/span&gt;&lt;span class="lnt"&gt;54
&lt;/span&gt;&lt;span class="lnt"&gt;55
&lt;/span&gt;&lt;span class="lnt"&gt;56
&lt;/span&gt;&lt;span class="lnt"&gt;57
&lt;/span&gt;&lt;span class="lnt"&gt;58
&lt;/span&gt;&lt;span class="lnt"&gt;59
&lt;/span&gt;&lt;span class="lnt"&gt;60
&lt;/span&gt;&lt;span class="lnt"&gt;61
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# PV&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolume&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pv-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 存储类名称&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storageClassName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;manual&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 存储资源&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 访问模式&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 数据源&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;nfs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/opt/nfs-volume&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;172.26.204.144&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# PVC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolumeClaim&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pvc-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storageClassName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;manual&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;resources&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;requests&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 用户使用&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;apps/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;test-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;replicas&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;selector&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;matchLabels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;template&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;containers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 使用卷&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeMounts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;mountPath&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 声明卷&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;persistentVolumeClaim&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;claimName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pvc-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;PV和PVC的生命周期如下表所示&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;操作&lt;/th&gt;
&lt;th&gt;PV 状态&lt;/th&gt;
&lt;th&gt;PVC 状态&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;创建 PV&lt;/td&gt;
&lt;td&gt;Available&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;创建 PVC&lt;/td&gt;
&lt;td&gt;Available&lt;/td&gt;
&lt;td&gt;Pending&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Bound&lt;/td&gt;
&lt;td&gt;Bound&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;删除 PV&lt;/td&gt;
&lt;td&gt;-/Terminating&lt;/td&gt;
&lt;td&gt;Lost/Bound&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;重新创建 PV&lt;/td&gt;
&lt;td&gt;Bound&lt;/td&gt;
&lt;td&gt;Bound&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;删除 PVC&lt;/td&gt;
&lt;td&gt;Released&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;后端存储不可用&lt;/td&gt;
&lt;td&gt;Failed&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;删除 PV 的 claimRef&lt;/td&gt;
&lt;td&gt;Available&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;PV生命周期&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;创建后未能正确关联到存储设备的PV处于Pending状态，成功关联后转为Available&lt;/li&gt;
&lt;li&gt;一个Available状态的PV与PVC关联后变为Bound状态&lt;/li&gt;
&lt;li&gt;处于Bound状态的PV，其关联的PVC被删除后，变为Release状态&lt;/li&gt;
&lt;li&gt;当PV的回收策略为recycle或手动删除PVC引用时，PV从Release状态变为Available状态&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;可选的回收策略：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Retain（保留）：删除PVC后将保留其绑定的PV及存储的数据，但会把该PV置为Released状态，它不可再被其他PVC所绑定，且需要由管理员手动进行后续的回收操作：首先删除PV，接着手动清理其关联的外部存储组件上的数据，最后手动删除该存储组件或者基于该组件重新创建PV&lt;/li&gt;
&lt;li&gt;Delete（删除）：对于支持该回收策略的卷插件，删除一个PVC将同时删除其绑定的PV资源以及该PV关联的外部存储组件；动态的PV回收策略继承自StorageClass资源，默认为Delete。多数情况下，管理员都需要根据用户的期望修改此默认策略，以免导致数据非计划内的删除&lt;/li&gt;
&lt;li&gt;Recycle（回收）：对于支持该回收策略的卷插件，删除PVC时，其绑定的PV所关联的外部存储组件上的数据会被清空，随后，该PV将转为Available状态，可再次接受其他PVC的绑定请求。不过，该策略已被废弃&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;recycle失败时，PV将从Released状态变为Failed状态&lt;/li&gt;
&lt;li&gt;可通过手动删除PVC将PV状态变成Available&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PVC生命周期&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一个Pending状态PVC与PV绑定后变为Bound状态&lt;/li&gt;
&lt;li&gt;处于Bound状态的PVC，与其关联的PV被删除后变为Lost状态&lt;/li&gt;
&lt;li&gt;Lost状态的PVC再次与PV绑定后变成Bound状态&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;PV和PVC的生命周期可概括为存储制备（Provision）、存储绑定、存储使用、存储回收四个阶段&lt;/p&gt;
&lt;p&gt;这是使用Kubernetes存储最基本的模式，但会产生2个问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;存储服务提供者难以预测用户的真实需求，如果用户提交了一个PVC，但是PV控制器没有找到合适的PV与之绑定，容器创建就会失败&lt;/li&gt;
&lt;li&gt;会造成资源浪费，如集群中创建的PV容量都是10G的，但是如果创建了一个声明使用5G的PVC，依然会绑定到10G的PV&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;因此Kubernetes提供了一种动态自动创建PV的机制，被称为动态制备（dynamic provision），刚刚说的手动创建PV的方式又被称为静态制备（static provision）&lt;/p&gt;
&lt;h3 id="12-storageclass--plugin"&gt;1.2 StorageClass &amp;amp; Plugin
&lt;/h3&gt;&lt;p&gt;Kubernetes使用一种API对象叫做存储类（StorageClass）提供动态预配、按需创建PV的机制。需要存储服务提供者事先借助存储类创建出一到多个“PV模板”，并在模板中定义好基于某个存储系统创建PV所依赖的存储组件（例如Ceph RBD存储映像或CephFS文件系统等）时需要用到的配置参数，包括PV的属性如存储类型、Volume大小等以及创建这种PV需要的存储插件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# SC示例&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;storage.k8s.io/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;StorageClass&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 指定存储服务方（Provisioner，预配器），基于该字段判断使用的存储插件，内置插件以kubernetes.io/为前缀&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;provisioner&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs.csi.k8s.io&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10.0.0.11&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;share&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 默认回收策略&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;reclaimPolicy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Delete&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 定义如何为PVC完成预配和绑定&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;volumeBindingMode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Immediate&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 当前类动态创建的PV资源的默认挂载选项&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;mountOptions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;nfsvers=4.1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;使用动态制备的方式创建PVC时，用户需要为其指定要使用PV模板（StorageClass资源），而后PV控制器会自动连接相应存储类上定义的 &lt;strong&gt;目标存储系统的管理接口&lt;/strong&gt; ，请求创建匹配该PVC需求的存储组件，并将该存储组件创建为Kubernetes集群上可由该PVC绑定的PV资源。&lt;/p&gt;
&lt;p&gt;Kubernetes通过卷插件（Volume Plugins）的机制接入目标存储系统，Kubernetes定义了一系列管理接口，插件即是在一个存储系统的基础上实现了这些管理接口的代码&lt;/p&gt;
&lt;p&gt;卷插件分为In-Tree和Out-of-Tree两类&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In-Tree的代码是放在Kubernetes内部的，和Kubernetes一起发布、管理与迭代，优点是使用方便，缺点是迭代速度慢、灵活性差，目前除了少数通用存储如nfs，hostpath，正在逐渐被废弃&lt;/li&gt;
&lt;li&gt;Out-of-Tree是由存储厂商提供的，有FlexVolume和CSI两种实现机制，目前FlexVolume已被废弃，Kubernetes官方目前提供了生产可用的NFS，SMB，NVMF、host-path四种CSI插件&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="13-kubernetes存储相关组件及架构"&gt;1.3 Kubernetes存储相关组件及架构
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810484129.png"
loading="lazy"
alt="1716810484129"
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PV控制器（集群维度）：负责PV及PVC的整个生命周期管理，主要监听PV/PVC/SC三类资源，当发现这些资源的CRU操作时，PV控制器会判断是否需要创建、删除、绑定和回收卷；并根据需求进行存储卷的预配和删除操作&lt;/li&gt;
&lt;li&gt;AD控制器（集群维度）：专用于存储设备的附加和拆除操作的组件，能够将存储设备关联（attach）至目标节点或从目标节点之上剥离（detach）
&lt;ul&gt;
&lt;li&gt;AD控制器监听Pod/Node时间，如有必要，调用Volume Plugin执行AD操作&lt;/li&gt;
&lt;li&gt;存储卷管理器也能触发AD操作，但它只监听调度到本节点的Pod&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;存储卷管理器（节点维度）：kubelet内置管理器组件之一，用于在当前节点上执行存储设备的挂载（mount）、卸载（unmount）和格式化（format）等操作；另外，存储卷管理器也可执行节点级别设备的附加（attach）及拆除（detach）操作&lt;/li&gt;
&lt;li&gt;存储卷插件：Kubernetes存储卷功能的基础设施，是存储任务相关操作的执行方；它是存储相关的扩展接口，用于对接各类存储设备&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;PV控制器、AD控制器和存储卷管理器均构建于存储卷插件之上，以提供不同维度管理功能的接口，具体的实现逻辑均由存储卷插件完成&lt;/p&gt;
&lt;p&gt;最初，只有VolumeManager能够Attach/Detach，但是节点宕掉后，它已经挂载的卷需要在其它节点进行Detach，然后再Attach，这个必须依赖外部才能完成，AD控制器因此产生&lt;/p&gt;
&lt;p&gt;现在，到底在何处进行Attach/Detach，取决于Volume Plugin，如果实现了Attach相关接口，则在AttachDetach中执行，否则，在Volume Manager上执行&lt;/p&gt;
&lt;h3 id="14-kubernetes存储实现原理"&gt;1.4 Kubernetes存储实现原理
&lt;/h3&gt;&lt;p&gt;PV对象成为容器内的持久化存储过程，实际上就是将一个宿主机上的目录跟一个容器里的目录绑定挂载在了一起&lt;/p&gt;
&lt;p&gt;如果使用远程存储服务实现容器数据的持久化，Kubernetes所做的就是将这个远程存储服务挂载到宿主机上的一个目录，以供将来进行绑定挂载时使用，这个准备宿主机目录的过程可以称为“两阶段处理”&lt;/p&gt;
&lt;p&gt;1 第一阶段Attach，由AD控制器完成，类似于插入硬盘&lt;/p&gt;
&lt;p&gt;当一个Pod调度到一个节点上后，kubelet要负责为这个pod创建它的volume目录，默认情况下，kubelet为volume创建的目录是一个宿主机上的路径，如&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/var/lib/kubelet/pods/&amp;lt;Pod ID&amp;gt;/volumes/kubernetes.io-&amp;lt;volume type&amp;gt;/&amp;lt;vulume name&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;接下来进行的操作取决于Volume类型，如使用远程块存储，会调用相应的API，将其提供的持久化盘挂载到宿主机上，如果使用CSI，则会调用相应的CSI接口&lt;/p&gt;
&lt;p&gt;2 第二阶段mount，也由存储卷管理器完成，类似于格盘并挂载&lt;/p&gt;
&lt;p&gt;完成Attach阶段后，kubelet需要格式化这个磁盘设备并将它挂载到宿主机指定的挂载点上，即之前提到的宿主机目录&lt;/p&gt;
&lt;p&gt;mount完成后Volume的宿主机目录就是一个持久化目录了，容器写入的内容会被存储在存储服务中，如果Volume类型是远程文件存储服务（如NFS），kubelet会跳过attach阶段，因为使用NFS不需要经过“插盘”这个操作，直接mount即可&lt;/p&gt;
&lt;p&gt;Kubernetes 通过在具体的插件实现接口上提供不同的参数列表，定义和区分这两个阶段&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一阶段Kubernetes通过nodeName，即宿主机的名字区分&lt;/li&gt;
&lt;li&gt;第二阶段通过dir，即Volume宿主机的目录区分&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;完成两阶段处理后，kubelet只需将这个volume目录通过CRI里的Mounts参数传递给Docker，就可以为Pod里的容器挂载这个持久化的Volume了&lt;/p&gt;
&lt;h3 id="15-csi-介绍"&gt;1.5 CSI 介绍
&lt;/h3&gt;&lt;p&gt;Kubernetes从1.8版本开始已经停止接受in-tree卷插件，并建议所有供应商实现out-of-tree卷插件，而2种out-of-tree卷扩展机制之一的flexvolume已经被废弃，所以目前CSI目前已成为接入自定义存储的唯一途径&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CSI架构&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810511242.png"
loading="lazy"
alt="1716810511242"
&gt;&lt;/p&gt;
&lt;p&gt;CSI，全称Container Storage Interface，是一种规范，在Kubernetes核心存储(即上文提到的PV控制器、AD控制器等)之外，CSI又引入了2组外部组件，方便存储提供者开发和使用CSI标准&lt;/p&gt;
&lt;p&gt;一组由Kubernetes官方提供，一系列external组件负责注册CSI Driver（即第三方提供的存储插件）或监听Kubernetes对象资源，从而发起csi Driver调用，都作为CSI Controller的sidecar容器&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;node-driver-register：一个sidecar容器，可从CSI driver获取驱动程序信息（使用NodeGetInfo），并使用kubelet插件注册机制在该节点上的kubelet中对其进行注册&lt;/li&gt;
&lt;li&gt;External Provisioner：一个sidecar容器，用于监视Kubernetes PersistentVolumeClaim对象并针对驱动程序端点触发CSI CreateVolume和DeleteVolume操作。external-attacher还支持快照数据源。如果将快照CRD资源指定为PVC对象上的数据源，则此sidecar容器通过获取SnapshotContent对象获取有关快照的信息，并填充数据源字段，该字段向存储系统指示应使用指定的快照填充新卷&lt;/li&gt;
&lt;li&gt;External Attacher：一个sidecar容器，用于监视Kubernetes VolumeAttachment对象并针对驱动程序端点触发CSI ControllerPublish和ControllerUnpublish操作&lt;/li&gt;
&lt;li&gt;livenessprobe：一个sidecar容器，用于监视CSI驱动程序的运行状况，并通过Liveness Probe机制将其报告给Kubernetes。这使Kubernetes能够自动检测驱动程序问题并重新启动Pod以尝试解决问题&lt;/li&gt;
&lt;li&gt;External Resizer：一个sidecar容器，监听PVC对象，如果用户在PVC对象请求更多存储，该组件会调用CSI Controller的NodeExpandVolume接口对volume进行扩容&lt;/li&gt;
&lt;li&gt;External Snapshotter：一个Snapshot Controller的sidecar容器，Snapshot Controller会根据集群中创建的Snapshot对象创建对应的VolumeSnapshotContent，而External Snapshotter负责监听之，监听到其发生变化时，将其对应参数传递给CSI Controller，调用其CreateSnapshot接口&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另一组需要存储提供者实现，也是卷插件必须的组成部分，这组中包括3个服务，分别需要实现三组grpc接口&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CSI Identity： 提供插件信息、能力、探测插件状态&lt;/li&gt;
&lt;li&gt;CSI Controller（Provision和Attach）：负责创建和管理卷&lt;/li&gt;
&lt;li&gt;CSI Node（mount）：在节点上完成和卷相关的功能，如Publish/Unpublish，Stage/Unstage&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CSI中Capabilities会标识出来此插件提供哪些能力，如IdentityServer中的GetPluginCapabilities方法，ControllerServer中的ControllerGetCapabilities方法和NodeServer中的NodeGetCapabilities&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CSI交互模型&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Kubelet和CSI插件的交互方式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Kubelet直接通过UDS，向CSI发起NodeStageVolume、NodePublishVolume等调用&lt;/li&gt;
&lt;li&gt;Kubelet通过插件注册机制来发现CSI插件及其UDS。这意味着CSI插件必须在任何节点上进行Kubelet插件注册&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Master和CSI插件的交互方式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;K8S控制平面不直接和CSI插件交互&lt;/li&gt;
&lt;li&gt;K8S控制平面组件仅仅通过K8S API进行相互交互&lt;/li&gt;
&lt;li&gt;CSI插件必须监控相关K8S API资源，并触发对应的CSI操作，例如卷创建、Attach、快照生成等&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;CSI对象&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Kubernetes提供了2个CSI相关的API对象CSIDriver和CSINode，方便CSI插件集成到Kubernetes&lt;/p&gt;
&lt;p&gt;CSIDriver提供的功能：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;简化CSI驱动的发现：在安装时附带一个CISDrive对象，就可以将存储提供者的插件注册到Kubernetes中&lt;/li&gt;
&lt;li&gt;定制K8S的行为：Kubernetes具有一套和CSI驱动交互的默认规则，例如默认它会调用Attach/Detach操作。使用CSIDriver··对象可以定制这一行为&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CSIDriver示例：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;storage.k8s.io/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;CSIDriver&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 和CSI驱动的全名一致&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;mycsidriver.example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 提示K8S，此驱动需要Attach操作（因为驱动实现了ControllerPublishVolume方法），&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 并且需要在Attach之后等待操作完成，然后再进行后续的Mount操作&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 默认值true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;attachRequired&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 提示K8S，在挂载阶段，此驱动需要Pod的信息（名称、Pod的UID等）&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# Pod信息会在NodePublishVolume调用中作为volume_context传递：&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# &amp;#34;csi.storage.k8s.io/pod.name&amp;#34;: pod.Name&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# &amp;#34;csi.storage.k8s.io/pod.namespace&amp;#34;: pod.Namespace&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# &amp;#34;csi.storage.k8s.io/pod.uid&amp;#34;: string(pod.UID)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# &amp;#34;csi.storage.k8s.io/serviceAccount.name&amp;#34;: pod.Spec.ServiceAccountName&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;podInfoOnMount&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 1.16中添加，到1.18为止beta&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 此驱动支持的Volume Mode&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeLifecycleModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;Persistent &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 默认，常规PV/PVC机制&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;Ephemeral &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# 内联临时存储（inline ephemeral volumes）&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;由CSIDrive注册后就可以通过kubectl查看所有安装的CSI驱动&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl get csidrivers.storage.k8s.io
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;CSINode对象存放CSI驱动产生的、节点相关的信息，它的功能是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;映射K8S节点名称到CSI节点名称：CSI的GetNodeInfo调用返回的name，是存储系统引用节点使用的名字。在后续的ControllerPublishVolume调用中K8S使用该名字引用节点&lt;/li&gt;
&lt;li&gt;为kubelet提供和kube-controller-manager、kube-scheduler交互的机制，不管CSI插件是否可用（注册到节点）&lt;/li&gt;
&lt;li&gt;卷拓扑：CSI的GetNodeInfo调用会返回一系列标签（键值对），来识别节点的拓扑信息。K8S使用这些信息进行拓扑感知的卷创建。这些键值对存放在Node对象中，Kubelet会把键存放在CSINode中，供后续引用&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CSINode示例：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;storage.k8s.io/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;CSINode&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;node1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;drivers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;mycsidriver.example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;nodeID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;storageNodeID1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;topologyKeys&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mycsidriver.example.com/regions&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;mycsidriver.example.com/zones&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="16-csi插件实现"&gt;1.6 CSI插件实现
&lt;/h3&gt;&lt;p&gt;存储提供者需要实现三个服务，CSI Identity，CSI Controller和CSI Node，这是在CSI规范中定义的，即上文提到的外部组件，这三个服务必须实现一组grpc接口&lt;/p&gt;
&lt;p&gt;CSI Identity&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-protobuf" data-lang="protobuf"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// 让调用者（K8S组件、CSI Sidecar容器）能识别驱动，知晓它具有哪些可选特性
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;service&lt;/span&gt; &lt;span class="n"&gt;Identity&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 获取插件名称和版本
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;GetPluginInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GetPluginInfoRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GetPluginInfoResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 获取插件功能
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;GetPluginCapabilities&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GetPluginCapabilitiesRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GetPluginCapabilitiesResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 检查插件是否运行
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;Probe&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProbeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProbeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;CSI Controller（Provision和Attach），可以运行在任何节点，实现创建卷、创建快照等功能，可选&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;span class="lnt"&gt;46
&lt;/span&gt;&lt;span class="lnt"&gt;47
&lt;/span&gt;&lt;span class="lnt"&gt;48
&lt;/span&gt;&lt;span class="lnt"&gt;49
&lt;/span&gt;&lt;span class="lnt"&gt;50
&lt;/span&gt;&lt;span class="lnt"&gt;51
&lt;/span&gt;&lt;span class="lnt"&gt;52
&lt;/span&gt;&lt;span class="lnt"&gt;53
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-protobuf" data-lang="protobuf"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;service&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 必须实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;CreateVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CreateVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CreateVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 必须实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;DeleteVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DeleteVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DeleteVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ControllerPublishVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerPublishVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerPublishVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ControllerUnpublishVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerUnpublishVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerUnpublishVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 必须实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ValidateVolumeCapabilities&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ValidateVolumeCapabilitiesRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ValidateVolumeCapabilitiesResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ListVolumes&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ListVolumesRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ListVolumesResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;GetCapacity&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GetCapacityRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GetCapacityResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 必须实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ControllerGetCapabilities&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerGetCapabilitiesRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerGetCapabilitiesResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// nfs-csi已实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;CreateSnapshot&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CreateSnapshotRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CreateSnapshotResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// nfs-csi已实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;DeleteSnapshot&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DeleteSnapshotRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DeleteSnapshotResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ListSnapshots&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ListSnapshotsRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ListSnapshotsResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ControllerExpandVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerExpandVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerExpandVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ControllerGetVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerGetVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerGetVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;alpha_method&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;ControllerModifyVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerModifyVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ControllerModifyVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;alpha_method&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;CSI Node（mount），任何存储提供者的卷，想要Publish的节点都需要运行此插件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-protobuf" data-lang="protobuf"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;service&lt;/span&gt; &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeStageVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeStageVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeStageVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeUnstageVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeUnstageVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeUnstageVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 将卷挂载到节点上
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodePublishVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodePublishVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodePublishVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 卸载卷
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeUnpublishVolume&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeUnpublishVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeUnpublishVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 获取卷状态
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeGetVolumeStats&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeGetVolumeStatsRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeGetVolumeStatsResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeExpandVolume&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeExpandVolumeRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeExpandVolumeResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 必须实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeGetCapabilities&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeGetCapabilitiesRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeGetCapabilitiesResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 必须实现，返回运行插件的节点的信息
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;rpc&lt;/span&gt; &lt;span class="n"&gt;NodeGetInfo&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeGetInfoRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;returns&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NodeGetInfoResponse&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;某些部署架构下，也可由一个服务（可以是一个二进制文件）同时提供CSI Controller和CSI Node两组接口&lt;/p&gt;
&lt;h3 id="17-csi部署架构"&gt;1.7 CSI部署架构
&lt;/h3&gt;&lt;p&gt;CSI规范的主要关注点是Kubernetes和卷插件之间的协议。Kubernetes应该同时支持中心化部署、headless部署的Plugin。几种可能的部署架构：&lt;/p&gt;
&lt;p&gt;注：headless指Kubernetes中的一种服务的配置方式，它允许您直接访问服务中的各个Pod而不是通过一个集群IP来访问整个服务。headless服务实现上是为与服务关联的每个 Pod 创建 DNS 记录。然后，可以使用这些 DNS 记录直接对每个 Pod 进行寻址&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;插件运行在所有节点上，在Master上运行中心化的控制器，所有节点上运行Node Plugin：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810592096.png"
loading="lazy"
alt="1716810592096"
&gt;&lt;/p&gt;
&lt;p&gt;注： CO即为容器编排系统（指Kubernetes），使用CSI的RPC接口和CSI插件交互&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;Headless部署，在所有节点上运行Plugin，Controller Plugin、Node Plugin分开部署：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810665824.png"
loading="lazy"
alt="1716810665824"
&gt;&lt;/p&gt;
&lt;ol start="3"&gt;
&lt;li&gt;Headless部署，在所有节点上运行Plugin，Controller Plugin、Node Plugin合并部署：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810672523.png"
loading="lazy"
alt="1716810672523"
&gt;&lt;/p&gt;
&lt;ol start="4"&gt;
&lt;li&gt;Headless部署，在所有节点上运行Plugin，只运行Node Plugin。GetPluginCapabilities调用不会报告CONTROLLER_SERVICE特性：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src="https://morsuning.github.io/image/kubernetes-csi-introduce/1716810678578.png"
loading="lazy"
alt="1716810678578"
&gt;&lt;/p&gt;
&lt;h2 id="2-kubernetes接入nfs存储方式及配置示例"&gt;2 Kubernetes接入NFS存储方式及配置示例
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;直接使用nfs卷，k8s内置支持(提前部署nfs-server：10.1.33.53)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;apps/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx-deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;replicas&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;selector&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;matchLabels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;template&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;containers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx:1.14.2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;containerPort&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeMounts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;mountPath&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/usr/share/nginx/html&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;nfs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/opt/nfs-deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10.1.33.53&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;将nfs创建为PV，并创建相应PVC，在容器中使用，静态绑定&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;span class="lnt"&gt;46
&lt;/span&gt;&lt;span class="lnt"&gt;47
&lt;/span&gt;&lt;span class="lnt"&gt;48
&lt;/span&gt;&lt;span class="lnt"&gt;49
&lt;/span&gt;&lt;span class="lnt"&gt;50
&lt;/span&gt;&lt;span class="lnt"&gt;51
&lt;/span&gt;&lt;span class="lnt"&gt;52
&lt;/span&gt;&lt;span class="lnt"&gt;53
&lt;/span&gt;&lt;span class="lnt"&gt;54
&lt;/span&gt;&lt;span class="lnt"&gt;55
&lt;/span&gt;&lt;span class="lnt"&gt;56
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# PV&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolume&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pv-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storageClassName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;manual&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany &lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;nfs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/opt/nfs-deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;172.26.204.144&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# PVC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolumeClaim&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pvc-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storageClassName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;manual&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;resources&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;requests&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 使用&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;apps/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;replicas&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;selector&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;matchLabels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;template&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;containers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;busybox&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sh&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-c&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;echo &amp;#34;Hello, Kubernetes!&amp;#34; &amp;amp;&amp;amp; sleep 3600&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeMounts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;mountPath&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;persistentVolumeClaim&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;claimName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pvc-nfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;K8S官方CSI插件，本身只提供了集群中的资源和NFS服务器之间的通信层，Driver直接使用官方的安装即可，使用如下&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;注：动态绑定需要注意权限问题，弄清楚是以什么账号权限访问的，配置读写权限是否具有读写权限&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;span class="lnt"&gt;46
&lt;/span&gt;&lt;span class="lnt"&gt;47
&lt;/span&gt;&lt;span class="lnt"&gt;48
&lt;/span&gt;&lt;span class="lnt"&gt;49
&lt;/span&gt;&lt;span class="lnt"&gt;50
&lt;/span&gt;&lt;span class="lnt"&gt;51
&lt;/span&gt;&lt;span class="lnt"&gt;52
&lt;/span&gt;&lt;span class="lnt"&gt;53
&lt;/span&gt;&lt;span class="lnt"&gt;54
&lt;/span&gt;&lt;span class="lnt"&gt;55
&lt;/span&gt;&lt;span class="lnt"&gt;56
&lt;/span&gt;&lt;span class="lnt"&gt;57
&lt;/span&gt;&lt;span class="lnt"&gt;58
&lt;/span&gt;&lt;span class="lnt"&gt;59
&lt;/span&gt;&lt;span class="lnt"&gt;60
&lt;/span&gt;&lt;span class="lnt"&gt;61
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 静态绑定&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolume&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pv-nfs-csi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;persistentVolumeReclaimPolicy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Retain&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;mountOptions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;hard&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;nfsvers=4.1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;csi&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs.csi.k8s.io&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;readOnly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeHandle&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;unique-volumeid #&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;#确保它是集群中的唯一 ID&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeAttributes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;172.26.204.144&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;share&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/opt/nfs-deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolumeClaim&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pvc-nfs-csi-static&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;resources&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;requests&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumeName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pv-nfs-csi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storageClassName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 动态绑定&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;storage.k8s.io/v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;StorageClass&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs-csi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;provisioner&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs.csi.k8s.io&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;172.26.204.144&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;share&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/opt/nfs-deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;reclaimPolicy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Delete&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;volumeBindingMode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Immediate&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;mountOptions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;hard&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;nfsvers=4.1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;PersistentVolumeClaim&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;pvc-nfs-csi-dynamic&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;accessModes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;ReadWriteMany&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;resources&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;requests&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;10Gi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;storageClassName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs-csi&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="3-reference"&gt;3 Reference
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://github.com/container-storage-interface/spec/blob/master/spec.md" target="_blank" rel="noopener"
&gt;https://github.com/container-storage-interface/spec/blob/master/spec.md&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.29/#api-overview" target="_blank" rel="noopener"
&gt;https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.29/#api-overview&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://kubernetes-csi.github.io/docs/introduction.html" target="_blank" rel="noopener"
&gt;https://kubernetes-csi.github.io/docs/introduction.html&lt;/a&gt;&lt;/p&gt;</description></item><item><title>云原生的5W1H</title><link>https://morsuning.github.io/p/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%9A%845w1h/</link><pubDate>Tue, 20 Sep 2022 00:00:00 +0000</pubDate><guid>https://morsuning.github.io/p/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%9A%845w1h/</guid><description>&lt;h1 id="云原生漫谈"&gt;云原生漫谈
&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;云原生的5w1h，what，why，where，how，who when -&amp;gt; anytime
云原生概念(定义、优势、总结);
云原生技术领域介绍：容器-&amp;gt;容器编排-&amp;gt;服务治理(简要介绍代表技术Docker、Kubernetes、Istio和Linkerd)、微服务架构 &amp;amp; Serverless架构、DevOps &amp;amp; 可观测性;
Kubernetes简介(如何满足12-Factor)、架构及开发方式;
应用的现代化改造思路;
云原生时代下的团队(对新出现一些岗位和名词的解释);
CNCF(简介、对cncf landscape的介绍);&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id="what---云原生的定义与核心概念"&gt;What - 云原生的定义与核心概念
&lt;/h1&gt;&lt;h2 id="定义演进"&gt;定义演进
&lt;/h2&gt;&lt;p&gt;云原生概念并非一蹴而就，而是随着云计算技术的发展逐步形成的。其定义经历了从简单到复杂、从单一到系统的演进过程：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;早期定义（2013-2015）：&lt;/strong&gt;
Pivotal 公司的 Matt Stine 在2015年首次系统性地提出了云原生概念，将其定义为包含&lt;strong&gt;12-Factor应用原则&lt;/strong&gt;、&lt;strong&gt;微服务架构&lt;/strong&gt;、&lt;strong&gt;自服务敏捷架构&lt;/strong&gt;、&lt;strong&gt;基于API的协作&lt;/strong&gt;和&lt;strong&gt;抗脆弱性&lt;/strong&gt;的综合体系。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CNCF官方定义（2017至今）：&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;权威专家观点：&lt;/strong&gt;
Martin Fowler 强调，云原生描述了一种高效组织的模式，可以快速地、一致地、可靠地、规模化地交付软件。&lt;strong&gt;持续交付&lt;/strong&gt;、&lt;strong&gt;DevOps&lt;/strong&gt; 和&lt;strong&gt;微服务&lt;/strong&gt;这三个核心要素分别指明了为什么、怎么样和什么是云原生。&lt;/p&gt;
&lt;h2 id="核心特征"&gt;核心特征
&lt;/h2&gt;&lt;p&gt;云原生架构具备以下核心特征：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;容器化封装&lt;/strong&gt;：基于容器技术实现应用封装和隔离&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;动态编排&lt;/strong&gt;：通过容器编排平台实现资源的动态调度&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;微服务架构&lt;/strong&gt;：将应用拆分为小型、独立的服务单元&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;服务治理&lt;/strong&gt;：提供服务发现、负载均衡、熔断降级等能力&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;声明式API&lt;/strong&gt;：通过声明而非命令的方式来描述期望状态&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;不可变基础设施&lt;/strong&gt;：基础设施变更通过替换而非修改实现&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="云原生12要素12-factor"&gt;云原生12要素（12-Factor）
&lt;/h2&gt;&lt;p&gt;云原生12要素由 Heroku 公司的 Adam Wiggins 提出，是构建现代化云原生应用的重要指导原则：&lt;/p&gt;
&lt;h3 id="1-基准代码codebase"&gt;1. 基准代码（Codebase）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：一份基准代码，多份部署&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：所有部署的基准代码相同，但每份部署可以使用不同版本&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：确保开发、测试、生产环境的一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-依赖dependencies"&gt;2. 依赖（Dependencies）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：显式声明依赖关系&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：通过依赖清单（如 package.json、requirements.txt）确切声明所有依赖项&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：避免依赖地狱，确保环境一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-配置config"&gt;3. 配置（Config）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：在环境中存储配置&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：将应用配置存储于环境变量中&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：不同部署间修改配置无需改动代码&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-后端服务backing-services"&gt;4. 后端服务（Backing Services）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：把后端服务当做附加资源&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：应用不区别对待本地或第三方服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：实现服务解耦，便于替换和扩展&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="5-构建发布运行build-release-run"&gt;5. 构建、发布、运行（Build, Release, Run）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：严格区分构建、发布、运行三个阶段&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：构建阶段将代码转换为可执行包，发布阶段将构建产物与配置结合&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：确保部署流程的可控性和可追溯性&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="6-进程processes"&gt;6. 进程（Processes）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：以一个或多个无状态进程运行应用&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：应用进程必须无状态且无共享&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：支持水平扩展和故障恢复&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="7-端口绑定port-binding"&gt;7. 端口绑定（Port Binding）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：通过端口绑定提供服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：应用完全自我加载，通过端口直接对外服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：实现应用的独立性和可移植性&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="8-并发concurrency"&gt;8. 并发（Concurrency）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：通过进程模型进行扩展&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：运用进程模型设计应用架构，分配不同工作给不同进程类型&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：支持应用的弹性伸缩&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="9-易处理disposability"&gt;9. 易处理（Disposability）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：快速启动和优雅终止可最大化健壮性&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：应用进程可瞬间开启或停止&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：提高系统的可靠性和资源利用率&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="10-开发环境与线上环境等价devprod-parity"&gt;10. 开发环境与线上环境等价（Dev/Prod Parity）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：尽可能保持开发、预发布、线上环境相同&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：缩小本地与线上差异，实现持续部署&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：减少环境不一致导致的问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="11-日志logs"&gt;11. 日志（Logs）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：把日志当做事件流&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：应用不存储或管理日志文件，而是输出到标准输出&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：实现日志的集中管理和分析&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="12-管理进程admin-processes"&gt;12. 管理进程（Admin Processes）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原则&lt;/strong&gt;：后台管理任务当做一次性进程运行&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实践&lt;/strong&gt;：一次性管理进程与常驻进程使用相同环境&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;意义&lt;/strong&gt;：确保管理操作的一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="why---云原生的价值与优势"&gt;Why - 云原生的价值与优势
&lt;/h1&gt;&lt;h2 id="发展历程与驱动力"&gt;发展历程与驱动力
&lt;/h2&gt;&lt;p&gt;云原生的兴起不是偶然，而是技术发展和业务需求共同推动的必然结果：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;技术演进脉络：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2000-2008&lt;/strong&gt;：虚拟化技术兴起（VMware、Xen）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2008-2013&lt;/strong&gt;：云计算普及（AWS、OpenStack）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2013-2016&lt;/strong&gt;：容器化革命（Docker 2013年发布）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2014-2017&lt;/strong&gt;：容器编排成熟（Kubernetes 2014年开源）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2016-至今&lt;/strong&gt;：云原生生态繁荣（CNCF成立，服务网格、Serverless等）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;业务驱动因素：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;数字化转型加速&lt;/strong&gt;：企业需要快速响应市场变化&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;用户体验要求提升&lt;/strong&gt;：随时可用、按需服务的期望&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;成本控制压力&lt;/strong&gt;：IT基础设施投入产出比优化需求&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;技术债务累积&lt;/strong&gt;：传统单体架构维护成本高企&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="核心优势分析"&gt;核心优势分析
&lt;/h2&gt;&lt;h3 id="1-业务敏捷性business-agility"&gt;1. 业务敏捷性（Business Agility）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;表现：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;快速迭代&lt;/strong&gt;：从开发到上线的时间从数月缩短到数天甚至数小时&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;灵活部署&lt;/strong&gt;：支持跨云、混合云部署，避免厂商锁定&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;渐进式发布&lt;/strong&gt;：支持蓝绿部署、金丝雀发布等策略&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;案例：&lt;/strong&gt; Netflix 通过云原生架构，能够每天进行数百次部署，快速推出新功能并A/B测试效果。&lt;/p&gt;
&lt;h3 id="2-系统弹性resilience"&gt;2. 系统弹性（Resilience）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;表现：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;故障隔离&lt;/strong&gt;：单个服务故障不影响整体系统&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动恢复&lt;/strong&gt;：容器重启、服务自愈等机制&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;弹性伸缩&lt;/strong&gt;：根据负载自动扩缩容&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;数据：&lt;/strong&gt; Google Kubernetes Engine (GKE) 声称可实现99.95%的可用性，年停机时间少于4.38分钟。&lt;/p&gt;
&lt;h3 id="3-资源效率resource-efficiency"&gt;3. 资源效率（Resource Efficiency）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;表现：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;高密度部署&lt;/strong&gt;：容器相比虚拟机资源占用更少&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;动态调度&lt;/strong&gt;：资源按需分配，避免浪费&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;成本优化&lt;/strong&gt;：Pay-as-you-go的计费模式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;对比：&lt;/strong&gt; 容器启动时间通常在秒级，而虚拟机需要分钟级；容器资源占用通常仅为虚拟机的10-20%。&lt;/p&gt;
&lt;h3 id="4-开发效率developer-productivity"&gt;4. 开发效率（Developer Productivity）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;表现：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;标准化环境&lt;/strong&gt;：开发、测试、生产环境一致&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动化流水线&lt;/strong&gt;：CI/CD自动化部署流程&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;微服务架构&lt;/strong&gt;：团队可以独立开发、部署、扩展各自的服务&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实践：&lt;/strong&gt; Spotify 的&amp;quot; squad&amp;quot; 模型，每个小团队负责特定的微服务，实现了高度的自治和效率。&lt;/p&gt;
&lt;h3 id="5-技术创新technical-innovation"&gt;5. 技术创新（Technical Innovation）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;表现：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;架构现代化&lt;/strong&gt;：从单体架构向微服务演进&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;技术栈灵活&lt;/strong&gt;：不同服务可选择最适合的技术栈&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;开源生态&lt;/strong&gt;：充分利用云原生开源技术红利&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="解决的核心问题"&gt;解决的核心问题
&lt;/h2&gt;&lt;p&gt;云原生从根本上解决了软件工程中的几个核心难题：&lt;/p&gt;
&lt;h3 id="1-复杂性管理complexity-management"&gt;1. 复杂性管理（Complexity Management）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;问题&lt;/strong&gt;：大型软件系统固有的复杂性&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解决方案&lt;/strong&gt;：微服务架构将复杂系统分解为简单组件&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;效果&lt;/strong&gt;：每个服务职责单一，易于理解和维护&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-变更适应change-adaptation"&gt;2. 变更适应（Change Adaptation）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;问题&lt;/strong&gt;：业务需求快速变化，传统架构难以适应&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解决方案&lt;/strong&gt;：持续交付和DevOps实践&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;效果&lt;/strong&gt;：支持小步快跑、快速验证的开发模式&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-可扩展性scalability"&gt;3. 可扩展性（Scalability）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;问题&lt;/strong&gt;：传统架构扩展成本高、难度大&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解决方案&lt;/strong&gt;：容器编排和自动扩缩容&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;效果&lt;/strong&gt;：系统可以根据负载自动调整资源&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-故障容忍fault-tolerance"&gt;4. 故障容忍（Fault Tolerance）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;问题&lt;/strong&gt;：组件故障导致系统整体不可用&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解决方案&lt;/strong&gt;：服务治理和容错机制&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;效果&lt;/strong&gt;：局部故障不影响整体服务&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="商业价值量化"&gt;商业价值量化
&lt;/h2&gt;&lt;p&gt;根据Puppet《2021年DevOps现状报告》：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;高性能组织特征：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;部署频率&lt;/strong&gt;：比低绩效组织高208倍&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;变更前置时间&lt;/strong&gt;：比低绩效组织快106倍&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;故障恢复时间&lt;/strong&gt;：比低绩效组织快2,604倍&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;变更失败率&lt;/strong&gt;：比低绩效组织低7倍&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;具体收益指标：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;开发效率提升&lt;/strong&gt;：30-50%&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;运维成本降低&lt;/strong&gt;：20-40%&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;系统可用性&lt;/strong&gt;：从99.9%提升到99.99%+&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;产品上市时间&lt;/strong&gt;：缩短50-70%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些数据充分说明了云原生在提升组织技术能力和商业竞争力方面的巨大价值。&lt;/p&gt;
&lt;h1 id="where---云原生技术领域"&gt;Where - 云原生技术领域
&lt;/h1&gt;&lt;h2 id="技术栈概览"&gt;技术栈概览
&lt;/h2&gt;&lt;p&gt;云原生技术栈形成了一个完整的生态系统，从基础设施到应用开发，涵盖了现代化的方方面面。整个技术栈分为多个层次：最底层是基础设施层，包括公有云、私有云、虚拟机和物理机；向上是容器运行时层，如containerd、CRI-O和Docker；再往上是容器编排层，以Kubernetes为核心；服务治理层提供服务网格、服务发现和配置中心能力；最上层是应用层，支持微服务架构、Serverless和API网关等模式。&lt;/p&gt;
&lt;h2 id="容器技术"&gt;容器技术
&lt;/h2&gt;&lt;h3 id="docker容器化的开创者"&gt;Docker：容器化的开创者
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;历史背景：&lt;/strong&gt;
Docker 最初是 dotCloud 公司内部的一个项目，2013年由 Solomon Hykes 正式开源。它通过将 LXC（Linux Container）技术标准化，极大地简化了容器的使用，开启了容器化时代。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心概念：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;镜像（Image）&lt;/strong&gt;：只读的模板，用于创建容器&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;容器（Container）&lt;/strong&gt;：镜像的运行实例&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;仓库（Registry）&lt;/strong&gt;：存储镜像的仓库服务（如 Docker Hub）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dockerfile&lt;/strong&gt;：构建镜像的文本文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技术优势：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;轻量化&lt;/strong&gt;：相比虚拟机，容器启动时间从分钟级降至秒级&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;标准化&lt;/strong&gt;：一次构建，处处运行&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;隔离性&lt;/strong&gt;：进程级隔离，资源限制&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;可移植性&lt;/strong&gt;：跨环境部署的一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实际应用：&lt;/strong&gt;
Docker 能够快速构建应用镜像、运行容器实例，并支持镜像的分发和管理。&lt;/p&gt;
&lt;h3 id="容器运行时演进"&gt;容器运行时演进
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;containerd：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Docker 核心运行时的独立组件&lt;/li&gt;
&lt;li&gt;CNCF 毕业项目，工业级标准&lt;/li&gt;
&lt;li&gt;提供标准的容器运行时接口（CRI）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CRI-O：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;专为 Kubernetes 设计的轻量级容器运行时&lt;/li&gt;
&lt;li&gt;支持 OCI（Open Container Initiative）标准&lt;/li&gt;
&lt;li&gt;与 Kubernetes 集成更紧密&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="容器编排"&gt;容器编排
&lt;/h2&gt;&lt;h3 id="kubernetes云原生操作系统"&gt;Kubernetes：云原生操作系统
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;发展历程：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2014年 Google 基于 Borg 开源&lt;/li&gt;
&lt;li&gt;2015年 v1.0 发布&lt;/li&gt;
&lt;li&gt;2018年成为 CNCF 毕业项目&lt;/li&gt;
&lt;li&gt;目前已成为容器编排的事实标准&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;核心架构：&lt;/strong&gt;
Kubernetes采用主从架构，Master节点负责集群管理和调度，Worker节点负责运行实际的容器化应用。Master节点包含API Server、Scheduler、Controller Manager和etcd等核心组件，Worker节点运行kubelet、kube-proxy和容器运行时。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心组件详解：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. API Server&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;集群的统一入口，提供 RESTful API&lt;/li&gt;
&lt;li&gt;所有组件都要通过 API Server 进行通信&lt;/li&gt;
&lt;li&gt;认证、授权、准入控制&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. etcd&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;分布式键值存储系统&lt;/li&gt;
&lt;li&gt;存储集群的所有状态数据&lt;/li&gt;
&lt;li&gt;基于 Raft 协议保证一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. Scheduler&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;负责Pod的调度决策&lt;/li&gt;
&lt;li&gt;考虑资源需求、亲和性、约束等&lt;/li&gt;
&lt;li&gt;支持多种调度策略和插件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. Controller Manager&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;运行各种控制器&lt;/li&gt;
&lt;li&gt;Node Controller、Replication Controller等&lt;/li&gt;
&lt;li&gt;维持集群的期望状态&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;5. kubelet&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每个节点上的代理&lt;/li&gt;
&lt;li&gt;负责 Pod 的生命周期管理&lt;/li&gt;
&lt;li&gt;与容器运行时交互&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;6. kube-proxy&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;服务代理和负载均衡&lt;/li&gt;
&lt;li&gt;实现 Service 的网络规则&lt;/li&gt;
&lt;li&gt;支持 iptables、IPVS 等模式&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="kubernetes-核心概念"&gt;Kubernetes 核心概念
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Pod：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;最小的部署单元&lt;/li&gt;
&lt;li&gt;一个或多个容器的组合&lt;/li&gt;
&lt;li&gt;共享网络和存储&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Service：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;服务的抽象定义&lt;/li&gt;
&lt;li&gt;提供稳定的访问入口&lt;/li&gt;
&lt;li&gt;支持多种类型：ClusterIP、NodePort、LoadBalancer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Deployment：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;声明式应用部署&lt;/li&gt;
&lt;li&gt;支持滚动更新和回滚&lt;/li&gt;
&lt;li&gt;确保Pod副本数量&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Ingress：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;集群外部访问规则&lt;/li&gt;
&lt;li&gt;基于域名的路由&lt;/li&gt;
&lt;li&gt;支持SSL终止&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="服务治理"&gt;服务治理
&lt;/h2&gt;&lt;h3 id="istio服务网格的领军者"&gt;Istio：服务网格的领军者
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;背景介绍：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2017年由 Google、IBM、Lyft 联合开源&lt;/li&gt;
&lt;li&gt;2022年成为 CNCF 毕业项目&lt;/li&gt;
&lt;li&gt;目前是服务网格领域的事实标准&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;核心架构：&lt;/strong&gt;
Istio采用数据平面和控制平面分离的架构。数据平面由Envoy代理组成，以Sidecar模式部署在每个应用服务旁边，负责处理服务间的所有通信。控制平面包含Pilot（流量管理）、Citadel（安全策略）和Galley（配置管理）等组件，负责管理和配置数据平面代理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心功能：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. 流量管理&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;智能路由：基于权重、请求内容的路由&lt;/li&gt;
&lt;li&gt;故障注入：模拟故障，测试系统弹性&lt;/li&gt;
&lt;li&gt;超时和重试：自动重试和超时控制&lt;/li&gt;
&lt;li&gt;熔断器：防止级联故障&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. 安全性&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;双向TLS：服务间通信加密&lt;/li&gt;
&lt;li&gt;身份认证：基于身份的访问控制&lt;/li&gt;
&lt;li&gt;授权策略：细粒度的访问控制&lt;/li&gt;
&lt;li&gt;审计日志：完整的安全审计链&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. 可观测性&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指标收集：Prometheus 格式的指标&lt;/li&gt;
&lt;li&gt;分布式追踪：Jaeger、Zipkin 集成&lt;/li&gt;
&lt;li&gt;访问日志：详细的请求响应日志&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="linkerd轻量级服务网格"&gt;Linkerd：轻量级服务网格
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;特点对比：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;性能&lt;/strong&gt;：Rust 实现，性能更优&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;复杂度&lt;/strong&gt;：架构更简单，学习成本低&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;资源占用&lt;/strong&gt;：相比 Istio 资源占用更少&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;生态&lt;/strong&gt;：功能相对简单，适合中小规模部署&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="微服务架构"&gt;微服务架构
&lt;/h2&gt;&lt;h3 id="架构模式"&gt;架构模式
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;单一职责原则：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每个服务专注于单一业务功能&lt;/li&gt;
&lt;li&gt;独立开发、测试、部署&lt;/li&gt;
&lt;li&gt;技术栈可以选择最适合的&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;API 设计原则：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RESTful API 或 GraphQL&lt;/li&gt;
&lt;li&gt;版本控制策略&lt;/li&gt;
&lt;li&gt;向后兼容性设计&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;数据管理：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每个服务独立的数据库&lt;/li&gt;
&lt;li&gt;数据一致性通过事件驱动保证&lt;/li&gt;
&lt;li&gt;分布式事务处理&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="服务间通信"&gt;服务间通信
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;同步通信：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP/REST：简单易用&lt;/li&gt;
&lt;li&gt;gRPC：高性能，支持流式传输&lt;/li&gt;
&lt;li&gt;GraphQL：灵活的数据查询&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;异步通信：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;消息队列：RabbitMQ、Kafka&lt;/li&gt;
&lt;li&gt;事件流：Apache Kafka、Pulsar&lt;/li&gt;
&lt;li&gt;发布订阅：Redis Pub/Sub、NATS&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="serverless-架构"&gt;Serverless 架构
&lt;/h2&gt;&lt;h3 id="faasfunction-as-a-service"&gt;FaaS（Function as a Service）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心概念：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;按需执行：事件触发，自动扩缩容&lt;/li&gt;
&lt;li&gt;按使用量计费：实际运行时间计费&lt;/li&gt;
&lt;li&gt;无服务器管理：运维负担最小&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;主流平台：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AWS Lambda&lt;/strong&gt;：市场份额最大&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Azure Functions&lt;/strong&gt;：微软云服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Google Cloud Functions&lt;/strong&gt;：谷歌云服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Apache OpenWhisk&lt;/strong&gt;：开源实现&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="baasbackend-as-a-service"&gt;BaaS（Backend as a Service）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;典型服务：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;数据库服务&lt;/strong&gt;：DynamoDB、Firestore&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;认证服务&lt;/strong&gt;：Auth0、Firebase Auth&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;存储服务&lt;/strong&gt;：S3、Blob Storage&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;消息服务&lt;/strong&gt;：SNS、Event Grid&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="devops-与可观测性"&gt;DevOps 与可观测性
&lt;/h2&gt;&lt;h3 id="cicd-流水线"&gt;CI/CD 流水线
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;持续集成：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;代码提交自动构建&lt;/li&gt;
&lt;li&gt;自动化测试执行&lt;/li&gt;
&lt;li&gt;代码质量检查&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;持续交付：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自动化部署到测试环境&lt;/li&gt;
&lt;li&gt;人工确认后部署到生产环境&lt;/li&gt;
&lt;li&gt;支持回滚和版本管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;工具链：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Jenkins&lt;/strong&gt;：传统且功能强大&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GitLab CI&lt;/strong&gt;：集成度高，易用性好&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GitHub Actions&lt;/strong&gt;：生态丰富，社区活跃&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Argo CD&lt;/strong&gt;：GitOps 实践&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="可观测性三大支柱"&gt;可观测性三大支柱
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 指标（Metrics）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Prometheus&lt;/strong&gt;：CNCF 毕业项目，事实标准&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Grafana&lt;/strong&gt;：可视化展示&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AlertManager&lt;/strong&gt;：告警管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. 日志（Logging）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ELK Stack&lt;/strong&gt;：Elasticsearch + Logstash + Kibana&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fluentd&lt;/strong&gt;：CNCF 毕业项目&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Loki&lt;/strong&gt;：轻量级日志系统&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. 追踪（Tracing）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Jaeger&lt;/strong&gt;：CNCF 毕业项目，Uber 开源&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Zipkin&lt;/strong&gt;：Twitter 开源，历史悠长&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SkyWalking&lt;/strong&gt;：国产优秀开源项目&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="总结"&gt;总结
&lt;/h2&gt;&lt;p&gt;云原生技术领域涵盖了从基础设施到应用开发的完整技术栈，每个层次都有成熟的开源解决方案和商业产品。理解这些技术的定位、特点和适用场景，是构建现代化云原生应用的基础。&lt;/p&gt;
&lt;h1 id="how---实施路径与最佳实践"&gt;How - 实施路径与最佳实践
&lt;/h1&gt;&lt;h2 id="应用现代化改造策略"&gt;应用现代化改造策略
&lt;/h2&gt;&lt;p&gt;将传统应用改造为云原生应用是一个系统性工程，需要根据应用特点选择合适的改造策略。改造过程通常遵循以下演进路径：&lt;/p&gt;
&lt;p&gt;应用现代化改造遵循从传统单体架构逐步向云原生架构演进的路径，包括容器化封装、微服务拆分、服务网格治理和Serverless优化等阶段。&lt;/p&gt;
&lt;h3 id="改造路径详解"&gt;改造路径详解
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;第一阶段：容器化&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目标&lt;/strong&gt;：将应用打包为容器镜像&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键步骤&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;分析应用依赖和环境要求&lt;/li&gt;
&lt;li&gt;编写 Dockerfile 和构建脚本&lt;/li&gt;
&lt;li&gt;创建容器编排配置&lt;/li&gt;
&lt;li&gt;建立镜像仓库和CI/CD流程&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;第二阶段：容器编排&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目标&lt;/strong&gt;：实现容器化应用的自动化管理&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键步骤&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;学习 Kubernetes 核心概念和API&lt;/li&gt;
&lt;li&gt;设计应用的 Kubernetes 部署架构&lt;/li&gt;
&lt;li&gt;实现服务发现和负载均衡&lt;/li&gt;
&lt;li&gt;配置资源限制和自动扩缩容&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;第三阶段：微服务拆分&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目标&lt;/strong&gt;：将单体应用拆分为独立的服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键步骤&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;识别业务边界和拆分点&lt;/li&gt;
&lt;li&gt;设计服务间接口和数据模型&lt;/li&gt;
&lt;li&gt;实现API网关和服务注册&lt;/li&gt;
&lt;li&gt;处理分布式事务和数据一致性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;第四阶段：服务治理&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目标&lt;/strong&gt;：实现高级的服务治理能力&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键步骤&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;引入服务网格（Istio/Linkerd）&lt;/li&gt;
&lt;li&gt;配置流量管理和安全策略&lt;/li&gt;
&lt;li&gt;建立可观测性体系&lt;/li&gt;
&lt;li&gt;实现混沌工程和故障测试&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;第五阶段：Serverless优化&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目标&lt;/strong&gt;：最大化资源利用率和运维效率&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键步骤&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;识别适合无服务化的业务场景&lt;/li&gt;
&lt;li&gt;重构代码为函数式架构&lt;/li&gt;
&lt;li&gt;集成事件驱动架构&lt;/li&gt;
&lt;li&gt;优化成本和性能&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="主流改造模式"&gt;主流改造模式
&lt;/h2&gt;&lt;h3 id="绞杀者模式strangler-fig-pattern"&gt;绞杀者模式（Strangler Fig Pattern）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;概念来源：&lt;/strong&gt;
借鉴自然界的绞杀榕现象，新的藤蔓逐渐包裹并取代老树。在软件架构中，通过逐步替换旧系统的功能来实现现代化改造。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实施步骤：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;建立反向代理&lt;/strong&gt;：在单体应用前部署API网关&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;识别替换点&lt;/strong&gt;：选择合适的功能模块进行拆分&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;逐步迁移&lt;/strong&gt;：将流量逐步切换到新服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最终替换&lt;/strong&gt;：完成所有功能迁移后下线旧系统&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;优势：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;风险可控，每次只迁移少量功能&lt;/li&gt;
&lt;li&gt;业务连续性好，用户体验无感知&lt;/li&gt;
&lt;li&gt;可以逐步积累微服务经验&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实施案例：&lt;/strong&gt;
通过API网关配置路由规则，可以将特定路径的请求（如&amp;quot;/api/v2/users&amp;quot;）导向新的微服务，而其他请求继续路由到原有的单体应用，实现平滑的渐进式迁移。&lt;/p&gt;
&lt;h3 id="防腐层模式anti-corruption-layer"&gt;防腐层模式（Anti-Corruption Layer）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;概念说明：&lt;/strong&gt;
在新旧系统之间建立一个适配层，防止新系统被旧系统的设计缺陷&amp;quot;污染&amp;quot;。这个层负责协议转换、数据模型转换和业务逻辑适配。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;应用场景：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;新服务需要调用老服务&lt;/li&gt;
&lt;li&gt;老系统调用新服务（反向适配）&lt;/li&gt;
&lt;li&gt;数据模型和接口协议不兼容&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实现方式：&lt;/strong&gt;
防腐层通过适配器模式实现新旧系统之间的接口转换。例如，当新系统需要调用旧的用户服务时，防腐层可以调用旧服务获取用户数据，然后将数据结构转换为新的DTO格式，隐藏新旧系统之间的数据结构差异。&lt;/p&gt;
&lt;h3 id="事件驱动迁移模式"&gt;事件驱动迁移模式
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心思想：&lt;/strong&gt;
通过事件总线作为新旧系统之间的通信桥梁，实现数据的同步和业务流程的协调。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实施步骤：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;建立事件总线&lt;/strong&gt;：部署消息队列或事件流平台&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;定义事件契约&lt;/strong&gt;：设计标准的事件格式&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;同步数据&lt;/strong&gt;：通过事件保持数据一致性&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;渐进式迁移&lt;/strong&gt;：逐步将业务逻辑迁移到新系统&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="kubernetes原生应用开发"&gt;Kubernetes原生应用开发
&lt;/h2&gt;&lt;h3 id="设计原则"&gt;设计原则
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 声明式配置&lt;/strong&gt;
通过声明式API能够定义应用的期望状态，Kubernetes会自动维护实际状态与期望状态的一致性。这种方式可以指定副本数量、容器镜像、端口配置等关键参数，实现应用的自动化部署和管理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 健康检查&lt;/strong&gt;
健康检查机制通过存活性探针和就绪性探针来监控应用运行状态。存活性探针能够检测容器是否正常运行并在异常时自动重启，就绪性探针可以确保应用完全准备好接收流量后才对外提供服务，从而提高系统的可靠性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. 资源管理&lt;/strong&gt;
通过设置资源请求和限制可以实现对容器资源的精确控制。资源请求确保容器获得所需的最小资源量，资源限制则防止单个容器占用过多资源影响其他应用，这种机制能够优化集群资源利用率和保证服务质量。&lt;/p&gt;
&lt;h3 id="sidecar模式"&gt;Sidecar模式
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;概念说明：&lt;/strong&gt;
将辅助功能容器与主应用容器部署在同一个Pod中，实现功能的解耦和复用。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;典型应用场景：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. 日志收集&lt;/strong&gt;
Sidecar模式能够在同一个Pod中部署日志收集容器与应用容器，通过共享存储卷实现日志数据的实时收集。日志收集容器可以监控应用日志文件的变化，并将日志转发到集中式日志系统，实现日志的统一管理和分析。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 服务代理&lt;/strong&gt;
通过服务网格的Sidecar注入机制，能够自动在应用容器旁边部署代理容器。这些代理容器负责处理服务间的通信、流量管理、安全策略等跨切面关注点，使应用开发人员可以专注于业务逻辑的实现。&lt;/p&gt;
&lt;h3 id="发布策略"&gt;发布策略
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 滚动更新（Rolling Update）&lt;/strong&gt;
滚动更新策略能够实现应用的零停机部署，通过逐步替换旧版本实例来更新应用。这种策略可以控制同时更新的实例数量，确保在整个更新过程中始终有足够的服务实例可用，从而保证服务的连续性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 蓝绿部署（Blue-Green Deployment）&lt;/strong&gt;
蓝绿部署通过维护两个完全相同的生产环境来实现快速切换。新版本部署在绿色环境中，测试通过后通过修改服务选择器将流量瞬间切换到新版本，这种方法可以实现快速回滚和零停机发布。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. 金丝雀发布（Canary Deployment）&lt;/strong&gt;
金丝雀发布策略允许将少量流量（如10%）引导到新版本应用，而大部分流量继续使用旧版本。这种渐进式发布方式可以在真实生产环境中验证新版本的稳定性，降低发布风险，同时支持基于请求特征的精确流量控制。&lt;/p&gt;
&lt;h2 id="可观测性实施"&gt;可观测性实施
&lt;/h2&gt;&lt;h3 id="监控体系"&gt;监控体系
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 应用监控&lt;/strong&gt;
Prometheus监控配置能够自动发现和收集应用指标。通过定义服务监控器，可以指定监控目标、采集间隔和指标路径，实现对应用性能、资源使用情况等关键指标的持续监控和告警。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 日志管理&lt;/strong&gt;
Fluentd日志收集器能够监控容器日志文件的变化，实时收集和转发日志数据。通过配置输入源、解析格式和输出目标，可以构建统一的日志收集管道，实现日志的集中存储、分析和检索。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. 分布式追踪&lt;/strong&gt;
分布式追踪系统通过在代码中添加追踪注解和手动创建Span，能够记录请求在微服务间的完整调用链路。这种机制可以可视化请求的传播路径、识别性能瓶颈、定位故障点，是实现系统可观测性的重要组成部分。&lt;/p&gt;
&lt;h2 id="最佳实践总结"&gt;最佳实践总结
&lt;/h2&gt;&lt;h3 id="架构设计"&gt;架构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;领域驱动设计&lt;/strong&gt;：基于业务边界进行服务拆分&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;API优先&lt;/strong&gt;：先设计API，再实现服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据分离&lt;/strong&gt;：每个服务独立的数据库&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;异步通信&lt;/strong&gt;：优先使用消息队列解耦&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="开发实践"&gt;开发实践
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;配置外部化&lt;/strong&gt;：使用 ConfigMap 和 Secret&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;健康检查&lt;/strong&gt;：实现标准的健康检查接口&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;优雅关闭&lt;/strong&gt;：处理SIGTERM信号&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;幂等设计&lt;/strong&gt;：支持重试机制&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="运维管理"&gt;运维管理
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;基础设施即代码&lt;/strong&gt;：使用Git管理配置&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动化测试&lt;/strong&gt;：完整的测试金字塔&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;安全扫描&lt;/strong&gt;：镜像和代码安全检查&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;成本监控&lt;/strong&gt;：持续优化资源使用&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过系统性地采用这些策略和最佳实践，组织可以成功地将传统应用改造为现代化的云原生应用，获得云原生带来的所有优势。&lt;/p&gt;
&lt;h1 id="who---云原生时代下的团队与人才"&gt;Who - 云原生时代下的团队与人才
&lt;/h1&gt;&lt;h2 id="组织架构演进"&gt;组织架构演进
&lt;/h2&gt;&lt;p&gt;云原生不仅是技术变革，更是组织和文化的变革。传统的开发和运维角色正在被新的角色和协作模式所取代。&lt;/p&gt;
&lt;h3 id="传统团队-vs-云原生团队"&gt;传统团队 vs 云原生团队
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;传统团队结构：&lt;/strong&gt;
传统组织采用职能分工的团队结构，开发团队、测试团队和运维团队各自独立工作，通过交付环节衔接，存在沟通壁垒和协作效率低的问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;云原生团队结构：&lt;/strong&gt;
云原生团队采用价值流导向的跨职能协作模式，产品团队、开发团队、平台工程团队和运维/SRE团队共同组成完整的价值交付单元，实现端到端的责任制和快速反馈循环。&lt;/p&gt;
&lt;h2 id="核心角色与职责"&gt;核心角色与职责
&lt;/h2&gt;&lt;h3 id="1-云原生工程师cloud-native-engineer"&gt;1. 云原生工程师（Cloud Native Engineer）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;定义：&lt;/strong&gt;
具备云原生技术栈综合能力的工程师，能够设计、开发和运维云原生应用。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心技能：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;容器化技术&lt;/strong&gt;：Docker、containerd、Podman&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;容器编排&lt;/strong&gt;：Kubernetes、Docker Swarm&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;服务网格&lt;/strong&gt;：Istio、Linkerd&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;监控观测&lt;/strong&gt;：Prometheus、Grafana、Jaeger&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CI/CD&lt;/strong&gt;：Jenkins、GitLab CI、Argo CD&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;编程语言&lt;/strong&gt;：Go、Python、Java、Node.js&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;职责范围：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设计和实施云原生架构&lt;/li&gt;
&lt;li&gt;编写基础设施即代码（IaC）&lt;/li&gt;
&lt;li&gt;建立CI/CD流水线&lt;/li&gt;
&lt;li&gt;实施微服务拆分&lt;/li&gt;
&lt;li&gt;配置监控和告警系统&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;薪资水平：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;初级：15-25万/年&lt;/li&gt;
&lt;li&gt;中级：25-40万/年&lt;/li&gt;
&lt;li&gt;高级：40-60万/年&lt;/li&gt;
&lt;li&gt;专家：60万+/年&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-sre工程师site-reliability-engineer"&gt;2. SRE工程师（Site Reliability Engineer）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;历史背景：&lt;/strong&gt;
SRE概念由Google在2003年提出，将软件工程方法应用于基础设施运维，强调通过自动化手段提高系统可靠性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心理念：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;错误预算&lt;/strong&gt;：允许一定比例的错误存在&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动化运维&lt;/strong&gt;：减少手动操作，提高效率&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;可观测性&lt;/strong&gt;：全面监控和故障诊断&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;容量规划&lt;/strong&gt;：前瞻性的资源管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;关键指标：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;可用性目标&lt;/strong&gt;：通常为99.9%或更高&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;错误预算&lt;/strong&gt;：1 - 可用性目标&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;变更频率&lt;/strong&gt;：衡量部署效率&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;恢复时间&lt;/strong&gt;：衡量故障处理能力&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;日常工作：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编写运维脚本和自动化工具&lt;/li&gt;
&lt;li&gt;处理生产环境故障&lt;/li&gt;
&lt;li&gt;优化系统性能和成本&lt;/li&gt;
&lt;li&gt;制定容量规划策略&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-平台工程师platform-engineer"&gt;3. 平台工程师（Platform Engineer）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;角色定位：&lt;/strong&gt;
构建内部开发者平台（IDP），为开发团队提供自助式的开发和部署环境。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心产品：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;开发者门户&lt;/strong&gt;：统一的服务入口&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CI/CD模板&lt;/strong&gt;：标准化的部署流程&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;环境管理&lt;/strong&gt;：开发、测试、生产环境&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;服务目录&lt;/strong&gt;：可复用的技术组件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技术栈：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes Operator&lt;/strong&gt;：自定义控制器&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Crossplane&lt;/strong&gt;：多云资源管理&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Backstage&lt;/strong&gt;：开发者门户框架&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tekton&lt;/strong&gt;：云原生CI/CD框架&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-devops工程师"&gt;4. DevOps工程师
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心使命：&lt;/strong&gt;
打破开发和运维之间的壁垒，建立持续交付的文化和流程。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;能力模型：&lt;/strong&gt;
DevOps工程师需要具备综合性的能力结构，包括技术能力（脚本编程、CI/CD工具链、容器技术、云平台服务）、流程能力（敏捷方法论、持续集成交付、基础设施即代码、监控反馈）以及文化能力（协作沟通、问题解决、持续学习、风险管理），三者并重支撑DevOps实践的有效实施。&lt;/p&gt;
&lt;h2 id="新兴角色分析"&gt;新兴角色分析
&lt;/h2&gt;&lt;h3 id="1-kubernetes开发工程师"&gt;1. Kubernetes开发工程师
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;专业化方向：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;K8s Operator开发&lt;/strong&gt;：编写自定义控制器&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;K8s API扩展&lt;/strong&gt;：开发CRD和Webhook&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;K8s网络插件&lt;/strong&gt;：CNI插件开发&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;K8s存储&lt;/strong&gt;：CSI驱动开发&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技能要求：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;深入理解Kubernetes架构&lt;/li&gt;
&lt;li&gt;熟练掌握Go语言&lt;/li&gt;
&lt;li&gt;了解控制器模式&lt;/li&gt;
&lt;li&gt;熟悉client-go库&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-服务网格工程师"&gt;2. 服务网格工程师
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;专业领域：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Istio配置和调优&lt;/strong&gt;：流量管理、安全策略&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy代理&lt;/strong&gt;：高级网络配置&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;可观测性集成&lt;/strong&gt;：分布式追踪、指标收集&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;安全治理&lt;/strong&gt;：mTLS、认证授权&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-云安全工程师"&gt;3. 云安全工程师
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;关注领域：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;容器安全&lt;/strong&gt;：镜像扫描、运行时保护&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes安全&lt;/strong&gt;：RBAC、NetworkPolicy、PodSecurity&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;供应链安全&lt;/strong&gt;：签名验证、SBOM&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;合规管理&lt;/strong&gt;：SOC2、ISO27001、GDPR&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-混沌工程师"&gt;4. 混沌工程师
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心理念：&lt;/strong&gt;
通过主动注入故障来测试系统的弹性，发现潜在问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实践方法：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;故障注入&lt;/strong&gt;：网络延迟、Pod删除、磁盘满载&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;故障演练&lt;/strong&gt;：Game Day、红蓝对抗&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;监控改进&lt;/strong&gt;：故障检测和恢复时间&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;系统加固&lt;/strong&gt;：提高容错能力&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="团队协作模式"&gt;团队协作模式
&lt;/h2&gt;&lt;h3 id="1-跨职能团队cross-functional-team"&gt;1. 跨职能团队（Cross-functional Team）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;团队组成：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;产品经理（1名）&lt;/li&gt;
&lt;li&gt;前端开发（2-3名）&lt;/li&gt;
&lt;li&gt;后端开发（3-4名）&lt;/li&gt;
&lt;li&gt;测试工程师（1-2名）&lt;/li&gt;
&lt;li&gt;SRE/运维（1名）&lt;/li&gt;
&lt;li&gt;UX设计师（1名）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;协作特点：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共同的业务目标&lt;/li&gt;
&lt;li&gt;端到端的责任制&lt;/li&gt;
&lt;li&gt;快速的反馈循环&lt;/li&gt;
&lt;li&gt;自组织的工作方式&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-平台即产品platform-as-product"&gt;2. 平台即产品（Platform as Product）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;理念转变：&lt;/strong&gt;
将基础设施团队转变为产品团队，将内部平台视为产品来开发和运营。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;产品特性：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;用户中心&lt;/strong&gt;：以开发者体验为核心&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;持续迭代&lt;/strong&gt;：基于用户反馈不断改进&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;文档完善&lt;/strong&gt;：提供详细的使用指南&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;技术支持&lt;/strong&gt;：专门的技术支持团队&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-guild行会模式"&gt;3. Guild（行会）模式
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;组织形式：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Chapter（章节）&lt;/strong&gt;：垂直的专业技能组&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Guild（行会）&lt;/strong&gt;：水平的技术兴趣组&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tribe（部落）&lt;/strong&gt;：跨部门的业务单元&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;协作优势：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;专业知识共享&lt;/li&gt;
&lt;li&gt;技术标准统一&lt;/li&gt;
&lt;li&gt;创新文化培养&lt;/li&gt;
&lt;li&gt;人才成长加速&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="人才培养路径"&gt;人才培养路径
&lt;/h2&gt;&lt;h3 id="1-技术路线"&gt;1. 技术路线
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;初级阶段（0-2年）：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;掌握Linux基础和脚本编程&lt;/li&gt;
&lt;li&gt;学习容器化技术（Docker）&lt;/li&gt;
&lt;li&gt;了解基础云服务&lt;/li&gt;
&lt;li&gt;掌握一种编程语言&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;中级阶段（2-5年）：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;深入Kubernetes生态&lt;/li&gt;
&lt;li&gt;掌握CI/CD工具链&lt;/li&gt;
&lt;li&gt;学习监控和日志系统&lt;/li&gt;
&lt;li&gt;了解微服务架构&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;高级阶段（5-8年）：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统架构设计能力&lt;/li&gt;
&lt;li&gt;性能优化和调优&lt;/li&gt;
&lt;li&gt;团队管理和 mentoring&lt;/li&gt;
&lt;li&gt;技术规划和选型&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;专家阶段（8年+）：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;技术战略制定&lt;/li&gt;
&lt;li&gt;开源项目贡献&lt;/li&gt;
&lt;li&gt;行业影响力建设&lt;/li&gt;
&lt;li&gt;创新技术探索&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-认证体系"&gt;2. 认证体系
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;云原生相关认证：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CKA/CKAD&lt;/strong&gt;：Kubernetes管理员/开发者认证&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNCF certifications&lt;/strong&gt;：各类云原生技术认证&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;云厂商认证&lt;/strong&gt;：AWS、Azure、GCP专业认证&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;安全认证&lt;/strong&gt;：CISSP、CISA等&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-学习资源"&gt;3. 学习资源
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;官方文档：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetes官方文档&lt;/li&gt;
&lt;li&gt;CNCF项目文档&lt;/li&gt;
&lt;li&gt;云厂商最佳实践&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;在线课程：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Coursera、Udemy平台课程&lt;/li&gt;
&lt;li&gt;Cloud Native Computing Foundation培训&lt;/li&gt;
&lt;li&gt;KubeAcademy免费课程&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实践平台：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Katacoda交互式教程&lt;/li&gt;
&lt;li&gt;Killercoda场景练习&lt;/li&gt;
&lt;li&gt;个人实验环境搭建&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="薪资趋势与前景"&gt;薪资趋势与前景
&lt;/h2&gt;&lt;h3 id="1-市场需求"&gt;1. 市场需求
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;热门职位排行（2024年）：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;云原生架构师&lt;/li&gt;
&lt;li&gt;Kubernetes工程师&lt;/li&gt;
&lt;li&gt;DevOps工程师&lt;/li&gt;
&lt;li&gt;SRE工程师&lt;/li&gt;
&lt;li&gt;平台工程师&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="2-薪资水平"&gt;2. 薪资水平
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;一线城市薪资范围：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;初级工程师：15-30万/年&lt;/li&gt;
&lt;li&gt;中级工程师：30-50万/年&lt;/li&gt;
&lt;li&gt;高级工程师：50-80万/年&lt;/li&gt;
&lt;li&gt;架构师/专家：80-150万/年&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-技能溢价"&gt;3. 技能溢价
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;高需求技能：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Go语言编程：+20-30%&lt;/li&gt;
&lt;li&gt;Kubernetes深度：+25-35%&lt;/li&gt;
&lt;li&gt;服务网格经验：+20-25%&lt;/li&gt;
&lt;li&gt;多云管理：+15-20%&lt;/li&gt;
&lt;li&gt;安全专长：+25-30%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;云原生时代的团队建设不仅是技能升级，更是思维模式的转变。成功的云原生团队需要具备技术深度、协作能力和持续学习的心态，在快速变化的技术环境中保持竞争力。&lt;/p&gt;
&lt;h1 id="when---云原生应用时机与场景"&gt;When - 云原生应用时机与场景
&lt;/h1&gt;&lt;h2 id="何时采用云原生"&gt;何时采用云原生
&lt;/h2&gt;&lt;h3 id="技术成熟度评估"&gt;技术成熟度评估
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;容器化准备度：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;应用架构&lt;/strong&gt;：是否为12-Factor应用&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;依赖管理&lt;/strong&gt;：是否显式声明依赖关系&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;配置管理&lt;/strong&gt;：是否支持外部配置&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;无状态设计&lt;/strong&gt;：应用是否无状态或可以改造为无状态&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;团队技能评估：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;技术栈&lt;/strong&gt;：团队是否掌握容器和编排技术&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DevOps实践&lt;/strong&gt;：是否有CI/CD经验&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;监控能力&lt;/strong&gt;：是否具备系统监控和故障处理能力&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;学习意愿&lt;/strong&gt;：团队是否有持续学习的文化&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;业务驱动因素：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;增长预期&lt;/strong&gt;：业务是否需要快速扩展&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;更新频率&lt;/strong&gt;：是否需要频繁发布新功能&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;可用性要求&lt;/strong&gt;：对系统可用性的要求程度&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;成本控制&lt;/strong&gt;：是否有优化IT成本的压力&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="最佳应用场景"&gt;最佳应用场景
&lt;/h3&gt;&lt;h4 id="1-互联网和移动互联网应用"&gt;1. 互联网和移动互联网应用
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;典型场景：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;电商平台的秒杀活动&lt;/li&gt;
&lt;li&gt;社交媒体的高并发访问&lt;/li&gt;
&lt;li&gt;在线教育的直播课堂&lt;/li&gt;
&lt;li&gt;短视频平台的内容分发&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;云原生优势：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;弹性伸缩&lt;/strong&gt;：应对流量峰值&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;快速迭代&lt;/strong&gt;：支持A/B测试和灰度发布&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;全球化部署&lt;/strong&gt;：多地域就近服务&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;成本优化&lt;/strong&gt;：按需使用资源&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-金融科技fintech"&gt;2. 金融科技（FinTech）
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;应用场景：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;移动支付系统&lt;/li&gt;
&lt;li&gt;量化交易平台&lt;/li&gt;
&lt;li&gt;数字银行服务&lt;/li&gt;
&lt;li&gt;区块链应用&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;特殊要求：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;安全合规&lt;/strong&gt;：满足金融监管要求&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;高可用性&lt;/strong&gt;：99.99%以上的可用性&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据一致性&lt;/strong&gt;：分布式事务处理&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;审计追踪&lt;/strong&gt;：完整的操作日志&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-物联网iot平台"&gt;3. 物联网（IoT）平台
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;典型特征：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;海量设备连接&lt;/li&gt;
&lt;li&gt;数据实时处理&lt;/li&gt;
&lt;li&gt;边缘计算需求&lt;/li&gt;
&lt;li&gt;低延迟响应&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;云原生解决方案：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;消息队列&lt;/strong&gt;：Kafka、Pulsar处理设备数据&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;流处理&lt;/strong&gt;：Flink、Spark Streaming实时分析&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;边缘计算&lt;/strong&gt;：KubeEdge管理边缘节点&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Serverless&lt;/strong&gt;：函数式处理设备事件&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-游戏行业"&gt;4. 游戏行业
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;应用场景：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;大型多人在线游戏&lt;/li&gt;
&lt;li&gt;手机网络游戏&lt;/li&gt;
&lt;li&gt;游戏直播平台&lt;/li&gt;
&lt;li&gt;电竞赛事系统&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技术需求：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;低延迟&lt;/strong&gt;：实时互动要求&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;高并发&lt;/strong&gt;：大量玩家同时在线&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;全球部署&lt;/strong&gt;：就近接入减少延迟&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;快速扩容&lt;/strong&gt;：应对玩家数量变化&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-媒体和娱乐"&gt;5. 媒体和娱乐
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;典型应用：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;视频点播平台&lt;/li&gt;
&lt;li&gt;音乐流媒体服务&lt;/li&gt;
&lt;li&gt;直播平台&lt;/li&gt;
&lt;li&gt;数字内容分发&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技术特点：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;大文件处理&lt;/strong&gt;：视频编码和转码&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CDN分发&lt;/strong&gt;：全球内容分发&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;个性化推荐&lt;/strong&gt;：实时内容推荐&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;版权保护&lt;/strong&gt;：DRM和加密技术&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="不适合的场景"&gt;不适合的场景
&lt;/h3&gt;&lt;h4 id="1-传统单体应用"&gt;1. 传统单体应用
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;特征：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;架构复杂，耦合度高&lt;/li&gt;
&lt;li&gt;数据库设计复杂，大量存储过程&lt;/li&gt;
&lt;li&gt;对性能要求极其苛刻（如高频交易）&lt;/li&gt;
&lt;li&gt;依赖特定的硬件设备&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;建议：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先进行架构重构&lt;/li&gt;
&lt;li&gt;逐步容器化&lt;/li&gt;
&lt;li&gt;考虑混合部署方案&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-小型简单应用"&gt;2. 小型简单应用
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;特征：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户量小，访问稳定&lt;/li&gt;
&lt;li&gt;功能简单，更新频率低&lt;/li&gt;
&lt;li&gt;运维成本有限&lt;/li&gt;
&lt;li&gt;技术团队规模小&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;替代方案：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PaaS平台（如Heroku、Vercel）&lt;/li&gt;
&lt;li&gt;传统云服务（EC2、虚拟机）&lt;/li&gt;
&lt;li&gt;托管式服务&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-严格合规的行业"&gt;3. 严格合规的行业
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;特殊要求：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据本地化存储&lt;/li&gt;
&lt;li&gt;严格的网络隔离&lt;/li&gt;
&lt;li&gt;传统的审批流程&lt;/li&gt;
&lt;li&gt;复杂的合规要求&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;私有云部署&lt;/li&gt;
&lt;li&gt;混合云架构&lt;/li&gt;
&lt;li&gt;等保合规云服务&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="实施时间表规划"&gt;实施时间表规划
&lt;/h2&gt;&lt;h3 id="第一阶段准备期3-6个月"&gt;第一阶段：准备期（3-6个月）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;目标评估：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;技术选型和架构设计&lt;/li&gt;
&lt;li&gt;团队技能培训&lt;/li&gt;
&lt;li&gt;基础环境搭建&lt;/li&gt;
&lt;li&gt;PoC项目验证&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;关键产出：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;技术架构文档&lt;/li&gt;
&lt;li&gt;团队培训计划&lt;/li&gt;
&lt;li&gt;基础设施方案&lt;/li&gt;
&lt;li&gt;PoC验证报告&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="第二阶段试点期6-12个月"&gt;第二阶段：试点期（6-12个月）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;试点项目：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;选择非核心业务试点&lt;/li&gt;
&lt;li&gt;建立完整的CI/CD流程&lt;/li&gt;
&lt;li&gt;实施监控告警体系&lt;/li&gt;
&lt;li&gt;总结最佳实践&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;成功指标：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;部署频率提升50%&lt;/li&gt;
&lt;li&gt;故障恢复时间缩短70%&lt;/li&gt;
&lt;li&gt;资源利用率提升30%&lt;/li&gt;
&lt;li&gt;团队满意度&amp;gt;80%&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="第三阶段推广期12-24个月"&gt;第三阶段：推广期（12-24个月）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;规模化推广：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;核心业务逐步迁移&lt;/li&gt;
&lt;li&gt;建立平台工程团队&lt;/li&gt;
&lt;li&gt;完善治理和规范&lt;/li&gt;
&lt;li&gt;建立供应商生态&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;组织变革：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;调整团队结构&lt;/li&gt;
&lt;li&gt;建立DevOps文化&lt;/li&gt;
&lt;li&gt;优化协作流程&lt;/li&gt;
&lt;li&gt;建立考核机制&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="第四阶段成熟期24个月"&gt;第四阶段：成熟期（24个月+）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;持续优化：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;成本优化和效率提升&lt;/li&gt;
&lt;li&gt;技术栈持续演进&lt;/li&gt;
&lt;li&gt;创新技术引入&lt;/li&gt;
&lt;li&gt;生态体系完善&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="成本收益分析"&gt;成本收益分析
&lt;/h2&gt;&lt;h3 id="投入成本"&gt;投入成本
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;人力成本：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;团队培训：50-100万/年&lt;/li&gt;
&lt;li&gt;外部咨询：100-300万&lt;/li&gt;
&lt;li&gt;人员招聘：薪资溢价20-40%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技术成本：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;云平台费用：初期增加20-50%&lt;/li&gt;
&lt;li&gt;工具采购：50-200万&lt;/li&gt;
&lt;li&gt;第三方服务：30-100万/年&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;组织成本：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;流程改造：难以量化但显著&lt;/li&gt;
&lt;li&gt;文化变革：长期投入&lt;/li&gt;
&lt;li&gt;风险承担：潜在的短期生产力下降&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="预期收益"&gt;预期收益
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;量化收益：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;开发效率：提升30-50%&lt;/li&gt;
&lt;li&gt;运维成本：降低20-40%&lt;/li&gt;
&lt;li&gt;系统可用性：从99.9%提升到99.99%&lt;/li&gt;
&lt;li&gt;产品上市时间：缩短50-70%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;质化收益：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;团队技术能力提升&lt;/li&gt;
&lt;li&gt;创新能力增强&lt;/li&gt;
&lt;li&gt;客户满意度提高&lt;/li&gt;
&lt;li&gt;市场竞争力增强&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="roi计算示例"&gt;ROI计算示例
&lt;/h3&gt;&lt;p&gt;假设一个中等规模的互联网公司：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;投入：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一年：500万&lt;/li&gt;
&lt;li&gt;第二年：300万&lt;/li&gt;
&lt;li&gt;第三年：200万&lt;/li&gt;
&lt;li&gt;总投入：1000万&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;收益：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;开发效率提升：年节省200万&lt;/li&gt;
&lt;li&gt;运维成本降低：年节省100万&lt;/li&gt;
&lt;li&gt;业务增长加速：年增收300万&lt;/li&gt;
&lt;li&gt;年收益：600万&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;投资回报期：&lt;/strong&gt; 1.7年
&lt;strong&gt;3年ROI：&lt;/strong&gt; 80%&lt;/p&gt;
&lt;h2 id="决策框架"&gt;决策框架
&lt;/h2&gt;&lt;h3 id="评估矩阵"&gt;评估矩阵
&lt;/h3&gt;&lt;p&gt;云原生技术采用决策需要综合考虑技术成熟度和业务需求两个维度。对于技术成熟度高且业务需求强烈的场景应立即采用，技术成熟度高但业务需求较低的可逐步尝试，而技术成熟度低的则需要根据业务紧迫性决定是投资建设还是暂缓考虑。&lt;/p&gt;
&lt;h3 id="关键决策因素"&gt;关键决策因素
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;必须考虑：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;业务匹配度&lt;/strong&gt;：云原生是否能解决核心业务痛点&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;技术可行性&lt;/strong&gt;：团队是否有能力实施和维护&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;成本效益&lt;/strong&gt;：投入产出比是否合理&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;风险控制&lt;/strong&gt;：是否有应对潜在风险的方案&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;加分因素：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;竞争压力&lt;/strong&gt;：竞争对手是否已经采用&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;技术趋势&lt;/strong&gt;：是否符合行业发展方向&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;人才储备&lt;/strong&gt;：是否能吸引和留住优秀人才&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;创新能力&lt;/strong&gt;：是否能支持业务创新&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;通过全面的评估和规划，组织可以在合适的时机引入云原生技术，最大化其价值并最小化风险。&lt;/p&gt;
&lt;h1 id="cncf---云原生计算基金会"&gt;CNCF - 云原生计算基金会
&lt;/h1&gt;&lt;h2 id="组织简介"&gt;组织简介
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;成立背景：&lt;/strong&gt;
CNCF（Cloud Native Computing Foundation）成立于2015年7月，由Google联合多家公司共同发起，致力于推动云原生技术的开源发展和标准化。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;使命愿景：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;使命&lt;/strong&gt;：使云原生技术普及且可持续&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;愿景&lt;/strong&gt;：构建开放、可扩展的云原生生态系统&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;价值观&lt;/strong&gt;：开放、中立、社区驱动&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;组织架构：&lt;/strong&gt;
CNCF采用分层治理结构，包括技术监督委员会负责技术决策，最终用户委员会代表用户声音，营销委员会推广生态发展，公共健康委员会维护项目健康，以及各种专业工作组负责特定领域的治理工作。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;会员体系：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;白金会员&lt;/strong&gt;：年费50万美元，拥有理事会席位
&lt;ul&gt;
&lt;li&gt;包括：Google、Microsoft、Oracle、IBM、Intel、Red Hat等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;黄金会员&lt;/strong&gt;：年费15万美元，参与技术决策&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;银牌会员&lt;/strong&gt;：年费7.5万美元，基础参与权限&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最终用户会员&lt;/strong&gt;：免费，享受技术咨询和交流&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="成熟度模型"&gt;成熟度模型
&lt;/h2&gt;&lt;p&gt;CNCF采用四级成熟度模型来评估项目：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. 初级项目（Sandbox）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;新加入的项目&lt;/li&gt;
&lt;li&gt;处于早期发展阶段&lt;/li&gt;
&lt;li&gt;需要社区验证和培育&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. 孵化项目（Incubating）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通过初步验证&lt;/li&gt;
&lt;li&gt;有明确的治理结构&lt;/li&gt;
&lt;li&gt;社区活跃度较高&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. 毕业项目（Graduated）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;完全成熟的项目&lt;/li&gt;
&lt;li&gt;广泛的行业采用&lt;/li&gt;
&lt;li&gt;强大的社区支持&lt;/li&gt;
&lt;li&gt;高质量和安全性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. 归档项目（Archived）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不再维护的项目&lt;/li&gt;
&lt;li&gt;建议迁移到替代方案&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="核心项目生态"&gt;核心项目生态
&lt;/h2&gt;&lt;h3 id="毕业项目2024年"&gt;毕业项目（2024年）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. Kubernetes（2018年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：容器编排平台&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GitHub Stars&lt;/strong&gt;：10万+&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;贡献者&lt;/strong&gt;：4000+&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;采用率&lt;/strong&gt;：90%的容器化应用使用K8s&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. Prometheus（2018年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：监控和告警系统&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特点&lt;/strong&gt;：时间序列数据库、Pull模型&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;生态&lt;/strong&gt;：Grafana、AlertManager&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. Envoy（2019年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：高性能代理&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;应用&lt;/strong&gt;：服务网格数据平面&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特性&lt;/strong&gt;：动态配置、热重载&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. CoreDNS（2019年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：DNS服务发现&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特点&lt;/strong&gt;：插件化架构、云原生友好&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;5. containerd（2019年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：容器运行时&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;集成&lt;/strong&gt;：Docker、Kubernetes cri-o&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;6. Fluentd（2019年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：日志收集器&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特点&lt;/strong&gt;：统一日志层、插件丰富&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;7. Jaeger（2020年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：分布式追踪系统&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兼容&lt;/strong&gt;：OpenTracing、OpenTelemetry&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;8. TiKV（2020年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：分布式事务性键值数据库&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特性&lt;/strong&gt;：ACID事务、水平扩展&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;9. Vitess（2021年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：数据库集群系统&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兼容&lt;/strong&gt;：MySQL协议&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;10. OPA（Open Policy Agent，2021年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：策略引擎&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;应用&lt;/strong&gt;：访问控制、合规检查&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;11. Helm（2022年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：Kubernetes包管理器&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;生态&lt;/strong&gt;：Chart仓库、模板管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;12. Argo（2022年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：云原生工具链&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;组件&lt;/strong&gt;：Argo CD、Argo Workflows、Argo Events&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;13. CNI（Container Networking Interface，2022年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：容器网络接口标准&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实现&lt;/strong&gt;：Calico、Flannel、Weave&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;14. etcd（2023年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：分布式键值存储&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;应用&lt;/strong&gt;：Kubernetes元数据存储&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;15. Rook（2023年毕业）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定位&lt;/strong&gt;：云原生存储编排&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;支持&lt;/strong&gt;：Ceph、EdgeFS等&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="重要孵化项目"&gt;重要孵化项目
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Istio&lt;/strong&gt;：服务网格控制平面
&lt;strong&gt;Linkerd&lt;/strong&gt;：轻量级服务网格
&lt;strong&gt;Thanos&lt;/strong&gt;：全局Prometheus视图
&lt;strong&gt;Cortex&lt;/strong&gt;：多租户Prometheus
&lt;strong&gt;KEDA&lt;/strong&gt;：Kubernetes事件驱动自动伸缩
&lt;strong&gt;Crossplane&lt;/strong&gt;：通用控制平面
&lt;strong&gt;Backstage&lt;/strong&gt;：开发者平台
&lt;strong&gt;Dapr&lt;/strong&gt;：分布式应用运行时
&lt;strong&gt;KubeEdge&lt;/strong&gt;：边缘计算平台&lt;/p&gt;
&lt;h2 id="cncf-landscape全景图"&gt;CNCF Landscape全景图
&lt;/h2&gt;&lt;h3 id="结构化分类"&gt;结构化分类
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;CNCF Landscape&lt;/strong&gt;将云原生生态分为以下几个主要类别：&lt;/p&gt;
&lt;h4 id="1-应用定义与开发app-definition-and-development"&gt;1. 应用定义与开发（App Definition and Development）
&lt;/h4&gt;&lt;p&gt;应用定义与开发层涵盖数据库（关系型如TiDB、NoSQL如MongoDB、时序数据库如InfluxDB、缓存如Redis）、流处理与消息系统（Kafka、Pulsar、NATS等）、应用运行时框架（Serverless平台Knative、运行时环境、微服务框架Dapr等）以及配置管理工具（配置中心Consul、密钥管理Vault、服务发现CoreDNS）等关键技术组件。&lt;/p&gt;
&lt;h4 id="2-编排与管理orchestration--management"&gt;2. 编排与管理（Orchestration &amp;amp; Management）
&lt;/h4&gt;&lt;p&gt;编排与管理层包含编排调度工具（核心Kubernetes、多集群管理Karmada、工作流引擎Argo）、服务网格技术（Istio、Linkerd、Consul Connect）、安全合规方案（镜像扫描Trivy、运行时安全Falco、策略引擎OPA、密钥管理Vault）以及可观测性组件（监控Prometheus、日志Fluentd、追踪Jaeger、可视化Grafana）等。&lt;/p&gt;
&lt;h4 id="3-运行时runtime"&gt;3. 运行时（Runtime）
&lt;/h4&gt;&lt;p&gt;运行时层提供容器运行时环境（核心containerd、安全增强gVisor、WebAssembly运行时WasmEdge）、云原生网络解决方案（CNI插件Calico、负载均衡器NGINX、服务代理Envoy）、存储系统（CSI驱动、分布式存储Ceph、对象存储MinIO）以及无服务器计算框架（FaaS平台OpenFaaS、事件驱动Knative、后端服务BaaS）。&lt;/p&gt;
&lt;h4 id="4-平台platform"&gt;4. 平台（Platform）
&lt;/h4&gt;&lt;p&gt;平台层提供各类云服务平台，包括公有云容器服务（AWS EKS、Azure AKS、Google GKE、国内阿里云ACK）、私有云混合云解决方案（Red Hat OpenShift、Rancher、VMware Tanzu）以及PaaS开发平台（Heroku等开发平台、OutSystems等低代码平台、Backstage等内部开发者平台）。&lt;/p&gt;
&lt;h3 id="典型云原生架构组合"&gt;典型云原生架构组合
&lt;/h3&gt;&lt;p&gt;基于CNCF Landscape，一个典型的生产级云原生架构采用分层设计，从上到下包括应用层（微服务应用、Serverless函数、API网关）、服务治理层（Istio服务网格、配置管理、密钥管理）、数据层（关系型数据库、缓存系统、消息队列）、编排层（Kubernetes集群、Helm包管理、Argo CD GitOps）、可观测性层（Prometheus监控、Grafana可视化、Jaeger分布式追踪、Fluentd日志收集、AlertManager告警）以及基础设施层（Containerd容器运行时、Calico网络插件、Longhorn存储系统）。&lt;/p&gt;
&lt;h2 id="云原生能力评估框架"&gt;云原生能力评估框架
&lt;/h2&gt;&lt;h3 id="技术成熟度评估-1"&gt;技术成熟度评估
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 基础设施层（20%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;容器化程度&lt;/li&gt;
&lt;li&gt;自动化运维&lt;/li&gt;
&lt;li&gt;资源编排&lt;/li&gt;
&lt;li&gt;多云管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. 应用层（30%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;微服务架构&lt;/li&gt;
&lt;li&gt;服务治理&lt;/li&gt;
&lt;li&gt;API管理&lt;/li&gt;
&lt;li&gt;事件驱动&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. DevOps层（25%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CI/CD流水线&lt;/li&gt;
&lt;li&gt;代码质量&lt;/li&gt;
&lt;li&gt;测试自动化&lt;/li&gt;
&lt;li&gt;安全扫描&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. 可观测性层（15%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;监控覆盖度&lt;/li&gt;
&lt;li&gt;日志管理&lt;/li&gt;
&lt;li&gt;追踪能力&lt;/li&gt;
&lt;li&gt;告警机制&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;5. 安全与治理（10%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;身份认证&lt;/li&gt;
&lt;li&gt;访问控制&lt;/li&gt;
&lt;li&gt;合规检查&lt;/li&gt;
&lt;li&gt;供应链安全&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="组织能力评估"&gt;组织能力评估
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 人员能力（30%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;技术技能水平&lt;/li&gt;
&lt;li&gt;学习能力&lt;/li&gt;
&lt;li&gt;创新能力&lt;/li&gt;
&lt;li&gt;团队协作&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. 流程成熟度（25%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;开发流程&lt;/li&gt;
&lt;li&gt;运维流程&lt;/li&gt;
&lt;li&gt;安全流程&lt;/li&gt;
&lt;li&gt;变更管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. 文化建设（25%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DevOps文化&lt;/li&gt;
&lt;li&gt;实验精神&lt;/li&gt;
&lt;li&gt;容错机制&lt;/li&gt;
&lt;li&gt;知识分享&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. 商业价值（20%）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;业务敏捷性&lt;/li&gt;
&lt;li&gt;成本效率&lt;/li&gt;
&lt;li&gt;创新能力&lt;/li&gt;
&lt;li&gt;客户满意度&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="云原生未来趋势"&gt;云原生未来趋势
&lt;/h2&gt;&lt;h3 id="技术发展方向"&gt;技术发展方向
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 边缘计算与云原生融合&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;KubeEdge、K3s等边缘计算技术&lt;/li&gt;
&lt;li&gt;5G网络与云原生结合&lt;/li&gt;
&lt;li&gt;IoT设备的云原生管理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. WebAssembly（Wasm）崛起&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;WasmEdge、Wasmtime等运行时&lt;/li&gt;
&lt;li&gt;与容器技术互补共存&lt;/li&gt;
&lt;li&gt;跨平台、高性能、安全隔离&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. 平台工程（Platform Engineering）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;内部开发者平台（IDP）&lt;/li&gt;
&lt;li&gt;开发者体验（DX）优化&lt;/li&gt;
&lt;li&gt;低代码/无代码平台&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. 绿色计算与可持续性&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;资源利用率优化&lt;/li&gt;
&lt;li&gt;碳足迹监控&lt;/li&gt;
&lt;li&gt;节能调度算法&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;5. AI/ML与云原生结合&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubeflow机器学习平台&lt;/li&gt;
&lt;li&gt;MLOps最佳实践&lt;/li&gt;
&lt;li&gt;智能运维（AIOps）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="行业发展趋势"&gt;行业发展趋势
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 普遍化采用&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从互联网行业向传统行业扩展&lt;/li&gt;
&lt;li&gt;政府、金融、制造业逐步采用&lt;/li&gt;
&lt;li&gt;中小企业普及化&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. 标准化推进&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OCI标准成熟&lt;/li&gt;
&lt;li&gt;服务网格标准（SMI）&lt;/li&gt;
&lt;li&gt;可观测性标准（OpenTelemetry）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. 商业化模式&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;托管服务（Managed Services）&lt;/li&gt;
&lt;li&gt;企业级支持服务&lt;/li&gt;
&lt;li&gt;咨询和培训市场&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. 生态系统完善&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更多开源项目涌现&lt;/li&gt;
&lt;li&gt;供应商整合与收购&lt;/li&gt;
&lt;li&gt;国际化与本地化并重&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过CNCF的组织推动和开源社区的共同努力，云原生技术正在成为现代应用开发的标准范式，为数字化转型提供强有力的技术支撑。&lt;/p&gt;
&lt;h1 id="参考资料--推荐阅读"&gt;参考资料 &amp;amp; 推荐阅读
&lt;/h1&gt;&lt;h2 id="核心技术书籍"&gt;核心技术书籍
&lt;/h2&gt;&lt;h3 id="云原生基础理论"&gt;云原生基础理论
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;《深入剖析Kubernetes》&lt;/strong&gt; - 张磊著，Kubernetes核心原理详解&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《Cloud Native: Designing Containers-Based Systems》&lt;/strong&gt; - Boris Scholl等，2020年出版&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《Designing Distributed Systems》&lt;/strong&gt; - Brendan Burns，容器化分布式系统设计模式&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《云原生应用设计模式》&lt;/strong&gt; - InfoQ技术文章，详细介绍了云原生设计模式&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="devops实践"&gt;DevOps实践
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;《凤凰项目：一个IT运维的传奇故事》&lt;/strong&gt; - Gene Kim等，DevOps文化启蒙之作&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《DevOps实践指南》&lt;/strong&gt; - Gene Kim等，DevOps实施方法论&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《持续交付》&lt;/strong&gt; - Jez Humble等，CI/CD最佳实践&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="微服务架构-1"&gt;微服务架构
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;《微服务架构设计模式》&lt;/strong&gt; - Chris Richardson，微服务设计权威指南&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《Building Microservices》&lt;/strong&gt; - Sam Newman，微服务架构实践&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《微服务设计》&lt;/strong&gt; - 理查德森，微服务架构理论与实践&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="企业级实践"&gt;企业级实践
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;《企业IT架构转型之道：阿里巴巴中台战略思想与架构实战》&lt;/strong&gt; - 阿里巴巴技术团队&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;《大型网站技术架构：核心原理与案例分析》&lt;/strong&gt; - 李智慧&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="在线资源"&gt;在线资源
&lt;/h2&gt;&lt;h3 id="官方文档"&gt;官方文档
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes官方文档&lt;/strong&gt;：https://kubernetes.io/docs/&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNCF官方文档&lt;/strong&gt;：https://cncf.io/&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Docker官方文档&lt;/strong&gt;：https://docs.docker.com/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="技术社区"&gt;技术社区
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;InfoQ云原生专栏&lt;/strong&gt;：https://www.infoq.cn/topic/cloud-native&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNCF Landscape&lt;/strong&gt;：https://landscape.cncf.io/&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cloud Native Computing Foundation Blog&lt;/strong&gt;：https://www.cncf.io/blog/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="开源项目"&gt;开源项目
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes GitHub&lt;/strong&gt;：https://github.com/kubernetes/kubernetes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Prometheus GitHub&lt;/strong&gt;：https://github.com/prometheus/prometheus&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio GitHub&lt;/strong&gt;：https://github.com/istio/istio&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="技术博客"&gt;技术博客
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Google Cloud Blog&lt;/strong&gt;：https://cloud.google.com/blog/topics/containers&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AWS Blog - Containers&lt;/strong&gt;：https://aws.amazon.com/blogs/containers/&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Microsoft Azure Blog&lt;/strong&gt;：https://azure.microsoft.com/en-us/blog/topics/containers/&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="认证与培训"&gt;认证与培训
&lt;/h2&gt;&lt;h3 id="官方认证"&gt;官方认证
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CKA (Certified Kubernetes Administrator)&lt;/strong&gt;：Kubernetes管理员认证&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CKAD (Certified Kubernetes Application Developer)&lt;/strong&gt;：Kubernetes应用开发者认证&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CKS (Certified Kubernetes Security Specialist)&lt;/strong&gt;：Kubernetes安全专家认证&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="在线课程"&gt;在线课程
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Coursera - Cloud Computing&lt;/strong&gt; by University of Illinois&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;edX - Introduction to Kubernetes&lt;/strong&gt; by The Linux Foundation&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A Cloud Guru - Kubernetes Deep Dive&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;KubeAcademy&lt;/strong&gt;：免费的Kubernetes学习平台&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="行业报告与研究"&gt;行业报告与研究
&lt;/h2&gt;&lt;h3 id="市场分析"&gt;市场分析
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Puppet State of DevOps Report&lt;/strong&gt;：年度DevOps发展报告&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNCF Survey&lt;/strong&gt;：云原生技术采用率调查&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gartner Magic Quadrant for Container Management&lt;/strong&gt;：容器管理平台评估&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="技术趋势"&gt;技术趋势
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ThoughtWorks Technology Radar&lt;/strong&gt;：技术趋势雷达图&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Red Hat State of Enterprise Open Source&lt;/strong&gt;：企业开源现状报告&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="实践案例"&gt;实践案例
&lt;/h2&gt;&lt;h3 id="互联网公司"&gt;互联网公司
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Netflix云原生实践&lt;/strong&gt;：微服务架构、混沌工程&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Google Borg to Kubernetes演进&lt;/strong&gt;：大规模容器编排实践&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;阿里巴巴中台架构&lt;/strong&gt;：大型电商平台的云原生转型&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="传统企业"&gt;传统企业
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ING银行数字化转型&lt;/strong&gt;：金融行业云原生应用&lt;/li&gt;
&lt;li&gt;** Walmart电商升级**：零售企业技术现代化&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="工具与平台"&gt;工具与平台
&lt;/h2&gt;&lt;h3 id="开发工具"&gt;开发工具
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Visual Studio Code&lt;/strong&gt;：轻量级IDE，支持云原生开发&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IntelliJ IDEA&lt;/strong&gt;：Java开发，支持Kubernetes插件&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lens&lt;/strong&gt;：Kubernetes可视化管理工具&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="监控与调试"&gt;监控与调试
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Grafana&lt;/strong&gt;：可视化监控面板&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Jaeger UI&lt;/strong&gt;：分布式追踪界面&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;K9s&lt;/strong&gt;：Kubernetes命令行管理工具&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="cicd平台"&gt;CI/CD平台
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Jenkins&lt;/strong&gt;：开源CI/CD工具&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GitLab CI/CD&lt;/strong&gt;：集成的DevOps平台&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GitHub Actions&lt;/strong&gt;：基于GitHub的自动化工作流&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="标准与规范"&gt;标准与规范
&lt;/h2&gt;&lt;h3 id="技术标准"&gt;技术标准
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OCI (Open Container Initiative)&lt;/strong&gt;：容器镜像和运行时标准&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNI (Container Networking Interface)&lt;/strong&gt;：容器网络接口标准&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CSI (Container Storage Interface)&lt;/strong&gt;：容器存储接口标准&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="安全标准"&gt;安全标准
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;NIST Cybersecurity Framework&lt;/strong&gt;：网络安全框架&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CIS Benchmarks&lt;/strong&gt;：安全配置基线&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过系统学习这些资源，可以深入理解云原生的理论、实践和发展趋势，为实际工作提供指导。&lt;/p&gt;</description></item></channel></rss>